{"version":3,"file":"main.umd.min.js","sources":["../node_modules/liquor-tree/dist/liquor-tree.esm.js","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../node_modules/vue-runtime-helpers/dist/inject-style/browser.mjs","../src/components/DualTreeview.vue","../src/index.js"],"sourcesContent":["\n/*!\n * LiquorTree v0.2.70\n * (c) 2019 amsik\n * Released under the MIT License.\n */\n\nvar NodeContent = {\n  name: 'node-content',\n  props: ['node'],\n  render: function render (h) {\n    var this$1 = this;\n\n    var node = this.node;\n    var vm = this.node.tree.vm;\n\n    if (node.isEditing) {\n      var nodeText = node.text;\n\n      this.$nextTick(function (_) {\n        this$1.$refs.editCtrl.focus();\n      });\n\n      return h('input', {\n        domProps: {\n          value: node.text,\n          type: 'text'\n        },\n        class: 'tree-input',\n        on: {\n          input: function input (e) {\n            nodeText = e.target.value;\n          },\n          blur: function blur () {\n            node.stopEditing(nodeText);\n          },\n          keyup: function keyup (e) {\n            if (e.keyCode === 13) {\n              node.stopEditing(nodeText);\n            }\n          },\n          mouseup: function mouseup (e) {\n            e.stopPropagation();\n          }\n        },\n        ref: 'editCtrl'\n      })\n    }\n\n    if (vm.$scopedSlots.default) {\n      return vm.$scopedSlots.default({ node: this.node })\n    }\n\n    return h('span', {\n      domProps: {\n        innerHTML: node.text\n      }\n    })\n  }\n};\n\nfunction normalizeComponent(compiledTemplate, injectStyle, defaultExport, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, isShadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n    if (typeof isShadowMode === 'function') {\n        createInjectorSSR = createInjector;\n        createInjector = isShadowMode;\n        isShadowMode = false;\n    }\n    // Vue.extend constructor export interop\n    var options = typeof defaultExport === 'function' ? defaultExport.options : defaultExport;\n    // render functions\n    if (compiledTemplate && compiledTemplate.render) {\n        options.render = compiledTemplate.render;\n        options.staticRenderFns = compiledTemplate.staticRenderFns;\n        options._compiled = true;\n        // functional template\n        if (isFunctionalTemplate) {\n            options.functional = true;\n        }\n    }\n    // scopedId\n    if (scopeId) {\n        options._scopeId = scopeId;\n    }\n    var hook;\n    if (moduleIdentifier) {\n        // server build\n        hook = function (context) {\n            // 2.3 injection\n            context =\n                context || // cached call\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\n            // 2.2 with runInNewContext: true\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n                context = __VUE_SSR_CONTEXT__;\n            }\n            // inject component styles\n            if (injectStyle) {\n                injectStyle.call(this, createInjectorSSR(context));\n            }\n            // register component module identifier for async chunk inference\n            if (context && context._registeredComponents) {\n                context._registeredComponents.add(moduleIdentifier);\n            }\n        };\n        // used by ssr in case component is cached and beforeCreate\n        // never gets called\n        options._ssrRegister = hook;\n    }\n    else if (injectStyle) {\n        hook = isShadowMode\n            ? function () {\n                injectStyle.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n            }\n            : function (context) {\n                injectStyle.call(this, createInjector(context));\n            };\n    }\n    if (hook) {\n        if (options.functional) {\n            // register for functional component in vue file\n            var originalRender = options.render;\n            options.render = function renderWithStyleInjection(h, context) {\n                hook.call(context);\n                return originalRender(h, context);\n            };\n        }\n        else {\n            // inject component registration as beforeCreate hook\n            var existing = options.beforeCreate;\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n        }\n    }\n    return defaultExport;\n}\n\n/* script */\nvar __vue_script__ = NodeContent;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nNodeContent.__file = \"NodeContent.vue\";\n\n/* template */\n\n  /* style */\n  var __vue_inject_styles__ = undefined;\n  /* scoped */\n  var __vue_scope_id__ = undefined;\n  /* module identifier */\n  var __vue_module_identifier__ = undefined;\n  /* functional template */\n  var __vue_is_functional_template__ = undefined;\n  /* style inject */\n  \n  /* style inject SSR */\n  \n\n  \n  var NodeContent$1 = normalizeComponent(\n    {},\n    __vue_inject_styles__,\n    __vue_script__,\n    __vue_scope_id__,\n    __vue_is_functional_template__,\n    __vue_module_identifier__,\n    undefined,\n    undefined\n  );\n\n//\n\nvar TreeNode = {\n  name: 'Node',\n  inject: ['tree'],\n  props: ['node', 'options'],\n\n  components: {\n    NodeContent: NodeContent$1\n  },\n\n  watch: {\n    node: function node() {\n      this.node.vm = this;\n    }\n  },\n\n  data: function data() {\n    this.node.vm = this;\n\n    return {\n      loading: false\n    }\n  },\n\n  computed: {\n    padding: function padding() {\n      return this.node.depth * (this.options.paddingLeft ? this.options.paddingLeft : this.options.nodeIndent) + 'px'\n    },\n\n    nodeClass: function nodeClass() {\n      var state = this.node.states;\n      var hasChildren = this.hasChildren();\n      var classes = {\n        'has-child': hasChildren,\n        'expanded': hasChildren && state.expanded,\n        'selected': state.selected,\n        'disabled': state.disabled,\n        'matched': state.matched,\n        'dragging': state.dragging,\n        'loading': this.loading,\n        'draggable': state.draggable\n      };\n\n      if (this.options.checkbox) {\n        classes['checked'] = state.checked;\n        classes['indeterminate'] = state.indeterminate;\n      }\n\n      return classes\n    },\n\n    visibleChildren: function visibleChildren() {\n      return this.node.children.filter(function(child) {\n        return child && child.visible()\n      })\n    }\n  },\n\n  methods: {\n    onNodeFocus: function onNodeFocus() {\n      this.tree.activeElement = this.node;\n    },\n\n    focus: function focus() {\n      this.$refs.anchor.focus();\n      this.node.select();\n    },\n\n    check: function check() {\n      if (this.node.checked()) {\n        this.node.uncheck();\n      } else {\n        this.node.check();\n      }\n    },\n\n    select: function select(ref) {\n      if ( ref === void 0 ) ref = evnt;\n      var ctrlKey = ref.ctrlKey;\n\n      var opts = this.options;\n      var tree = this.tree;\n      var node = this.node;\n\n      tree.$emit('node:clicked', node);\n\n      if (opts.editing && node.isEditing) {\n        return\n      }\n\n      if (opts.editing && node.editable()) {\n        return this.startEditing()\n      }\n\n      if (opts.checkbox && opts.checkOnSelect) {\n        if (!opts.parentSelect && this.hasChildren()) {\n          return this.toggleExpand()\n        }\n\n        return this.check(ctrlKey)\n      }\n\n      // 'parentSelect' behaviour.\n      // For nodes which has a children list we have to expand/collapse\n      if (!opts.parentSelect && this.hasChildren()) {\n        this.toggleExpand();\n      }\n\n      if (opts.multiple) {\n        if (!node.selected()) {\n          node.select(ctrlKey);\n        } else {\n          if (ctrlKey) {\n            node.unselect();\n          } else {\n            if (this.tree.selectedNodes.length != 1) {\n              tree.unselectAll();\n              node.select();\n            }\n          }\n        }\n      } else {\n        if (node.selected() && ctrlKey) {\n          node.unselect();\n        } else {\n          node.select();\n        }\n      }\n    },\n\n    toggleExpand: function toggleExpand() {\n      if (this.hasChildren()) {\n        this.node.toggleExpand();\n      }\n    },\n\n    hasChildren: function hasChildren() {\n      return this.node.hasChildren()\n    },\n\n    startEditing: function startEditing() {\n      if (this.tree._editingNode) {\n        this.tree._editingNode.stopEditing();\n      }\n\n      this.node.startEditing();\n    },\n\n    stopEditing: function stopEditing() {\n      this.node.stopEditing();\n    },\n\n    handleMouseDown: function handleMouseDown(event) {\n      if (!this.options.dnd) {\n        return\n      }\n\n      this.tree.vm.startDragging(this.node, event);\n    }\n  }\n};\n\nvar isOldIE = typeof navigator !== 'undefined' &&\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n    return function (id, style) { return addStyle(id, style); };\n}\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\nfunction addStyle(id, css) {\n    var group = isOldIE ? css.media || 'default' : id;\n    var style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\n    if (!style.ids.has(id)) {\n        style.ids.add(id);\n        var code = css.source;\n        if (css.map) {\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\n            // this makes source maps inside style tags work properly in Chrome\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\n            // http://stackoverflow.com/a/26603875\n            code +=\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\n                    ' */';\n        }\n        if (!style.element) {\n            style.element = document.createElement('style');\n            style.element.type = 'text/css';\n            if (css.media)\n                { style.element.setAttribute('media', css.media); }\n            HEAD.appendChild(style.element);\n        }\n        if ('styleSheet' in style.element) {\n            style.styles.push(code);\n            style.element.styleSheet.cssText = style.styles\n                .filter(Boolean)\n                .join('\\n');\n        }\n        else {\n            var index = style.ids.size - 1;\n            var textNode = document.createTextNode(code);\n            var nodes = style.element.childNodes;\n            if (nodes[index])\n                { style.element.removeChild(nodes[index]); }\n            if (nodes.length)\n                { style.element.insertBefore(textNode, nodes[index]); }\n            else\n                { style.element.appendChild(textNode); }\n        }\n    }\n}\n\n/* script */\nvar __vue_script__$1 = TreeNode;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nTreeNode.__file = \"TreeNode.vue\";\n\n/* template */\nvar __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"tree-node\",class:_vm.nodeClass,attrs:{\"data-id\":_vm.node.id},on:{\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMouseDown($event)}}},[_c('div',{staticClass:\"tree-content\",style:([_vm.options.direction == 'ltr' ? {'padding-left': _vm.padding} : {'padding-right': _vm.padding}]),on:{\"click\":function($event){$event.stopPropagation();return _vm.select($event)}}},[_c('i',{staticClass:\"tree-arrow\",class:[{'expanded': _vm.node.states.expanded, 'has-child': _vm.node.children.length || _vm.node.isBatch}, _vm.options.direction],on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleExpand($event)}}}),_vm._v(\" \"),(_vm.options.checkbox)?_c('i',{staticClass:\"tree-checkbox\",class:{'checked': _vm.node.states.checked, 'indeterminate': _vm.node.states.indeterminate},on:{\"click\":function($event){$event.stopPropagation();return _vm.check($event)}}}):_vm._e(),_vm._v(\" \"),_c('span',{ref:\"anchor\",staticClass:\"tree-anchor\",attrs:{\"tabindex\":\"-1\"},on:{\"focus\":_vm.onNodeFocus,\"dblclick\":function($event){return _vm.tree.$emit('node:dblclick', _vm.node)}}},[_c('node-content',{attrs:{\"node\":_vm.node}})],1)]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"l-fade\"}},[(_vm.hasChildren() && _vm.node.states.expanded)?_c('ul',{staticClass:\"tree-children\"},_vm._l((_vm.visibleChildren),function(child){return _c('node',{key:child.id,attrs:{\"node\":child,\"options\":_vm.options}})}),1):_vm._e()])],1)};\nvar __vue_staticRenderFns__ = [];\n\n  /* style */\n  var __vue_inject_styles__$1 = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-20094490_0\", { source: \".tree-node{white-space:nowrap;display:flex;flex-direction:column;position:relative;box-sizing:border-box}.tree-content{display:flex;align-items:center;padding:3px;cursor:pointer;width:100%;box-sizing:border-box}.tree-node:not(.selected)>.tree-content:hover{background:#f6f8fb}.tree-node.selected>.tree-content{background-color:#e7eef7}.tree-node.disabled>.tree-content:hover{background:inherit}.tree-arrow{flex-shrink:0;height:30px;cursor:pointer;margin-left:30px;width:0}.tree-arrow.has-child{margin-left:0;width:30px;position:relative}.tree-arrow.has-child:after{border:1.5px solid #494646;position:absolute;border-left:0;border-top:0;left:9px;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.has-child.rtl:after{border:1.5px solid #494646;position:absolute;border-right:0;border-bottom:0;right:0;top:50%;height:9px;width:9px;transform:rotate(-45deg) translateY(-50%) translateX(0);transition:transform .25s;transform-origin:center}.tree-arrow.expanded.has-child:after{transform:rotate(45deg) translateY(-50%) translateX(-5px)}.tree-checkbox{flex-shrink:0;position:relative;width:30px;height:30px;box-sizing:border-box;border:1px solid #dadada;border-radius:2px;background:#fff;transition:border-color .25s,background-color .25s}.tree-arrow:after,.tree-checkbox:after{position:absolute;display:block;content:\\\"\\\"}.tree-checkbox.checked,.tree-checkbox.indeterminate{background-color:#3a99fc;border-color:#218eff}.tree-checkbox.checked:after{box-sizing:content-box;border:1.5px solid #fff;border-left:0;border-top:0;left:9px;top:3px;height:15px;width:8px;transform:rotate(45deg) scaleY(0);transition:transform .25s;transform-origin:center}.tree-checkbox.checked:after{transform:rotate(45deg) scaleY(1)}.tree-checkbox.indeterminate:after{background-color:#fff;top:50%;left:20%;right:20%;height:2px}.tree-anchor{flex-grow:2;outline:0;display:flex;text-decoration:none;color:#343434;vertical-align:top;margin-left:3px;line-height:24px;padding:3px 6px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tree-node.selected>.tree-content>.tree-anchor{outline:0}.tree-node.disabled>.tree-content>.tree-anchor{color:#989191;background:#fff;opacity:.6;cursor:default;outline:0}.tree-input{display:block;width:100%;height:24px;line-height:24px;outline:0;border:1px solid #3498db;padding:0 4px}.l-fade-enter-active,.l-fade-leave-active{transition:opacity .3s,transform .3s;transform:translateX(0)}.l-fade-enter,.l-fade-leave-to{opacity:0;transform:translateX(-2em)}.tree--small .tree-anchor{line-height:19px}.tree--small .tree-checkbox{width:23px;height:23px}.tree--small .tree-arrow{height:23px}.tree--small .tree-checkbox.checked:after{left:7px;top:3px;height:11px;width:5px}.tree-node.has-child.loading>.tree-content>.tree-arrow,.tree-node.has-child.loading>.tree-content>.tree-arrow:after{border-radius:50%;width:15px;height:15px;border:0}.tree-node.has-child.loading>.tree-content>.tree-arrow{font-size:3px;position:relative;border-top:1.1em solid rgba(45,45,45,.2);border-right:1.1em solid rgba(45,45,45,.2);border-bottom:1.1em solid rgba(45,45,45,.2);border-left:1.1em solid #2d2d2d;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);left:5px;-webkit-animation:loading 1.1s infinite linear;animation:loading 1.1s infinite linear;margin-right:8px}@-webkit-keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes loading{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__$1 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$1 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$1 = false;\n  /* style inject SSR */\n  \n\n  \n  var TreeNode$1 = normalizeComponent(\n    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },\n    __vue_inject_styles__$1,\n    __vue_script__$1,\n    __vue_scope_id__$1,\n    __vue_is_functional_template__$1,\n    __vue_module_identifier__$1,\n    createInjector,\n    undefined\n  );\n\n//\n//\n//\n//\n//\n//\n\nvar script = {\n  name: 'DragNode',\n  props: ['target'],\n  computed: {\n    style: function style() {\n      if (undefined === this.target.top) {\n        return 'display: none'\n      }\n\n      return (\"top: \" + (this.target.top) + \"px; left: \" + (this.target.left) + \"px\")\n    }\n  }\n};\n\n/* script */\nvar __vue_script__$2 = script;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nscript.__file = \"DraggableNode.vue\";\n\n/* template */\nvar __vue_render__$1 = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-dragnode\",style:(_vm.style)},[_vm._v(\"\\n  \"+_vm._s(_vm.target.node.text)+\"\\n\")])};\nvar __vue_staticRenderFns__$1 = [];\n\n  /* style */\n  var __vue_inject_styles__$2 = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-7a41ac3e_0\", { source: \".tree-dragnode{padding:10px;border:1px solid #e7eef7;position:fixed;border-radius:8px;background:#fff;transform:translate(-50%,-110%);z-index:10}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__$2 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$2 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$2 = false;\n  /* style inject SSR */\n  \n\n  \n  var DraggableNode = normalizeComponent(\n    { render: __vue_render__$1, staticRenderFns: __vue_staticRenderFns__$1 },\n    __vue_inject_styles__$2,\n    __vue_script__$2,\n    __vue_scope_id__$2,\n    __vue_is_functional_template__$2,\n    __vue_module_identifier__$2,\n    createInjector,\n    undefined\n  );\n\nfunction recurseDown (obj, fn) {\r\n  var res;\r\n\r\n  if (Array.isArray(obj)) {\r\n    return obj.map(function (node) { return recurseDown(node, fn); })\r\n  }\r\n\r\n  res = fn(obj);\r\n\r\n  // Recurse children\r\n  if (res !== false && obj.children && obj.children.length) {\r\n    res = recurseDown(obj.children, fn);\r\n  }\r\n\r\n  return res\r\n}\n\nfunction striptags (value) {\r\n  // ssr fix\r\n  if (!!document === false) {\r\n    return value\r\n  }\r\n\r\n  if (!striptags.__element) {\r\n    striptags.__element = document.createElement('div');\r\n  }\r\n\r\n  striptags.__element.innerHTML = value;\r\n  return striptags.__element.innerText\r\n}\r\n\r\nfunction finder (criteria) {\r\n  return function (node) {\r\n    return Object.keys(criteria).every(function (key) {\r\n      if (key === 'text' || key === 'id') {\r\n        var c = criteria[key];\r\n        var val = node[key];\r\n\r\n        // remove html tags\r\n        val = striptags(val);\r\n\r\n        if (isRegExp(c)) {\r\n          return c.test(val)\r\n        } else {\r\n          return c === val\r\n        }\r\n      }\r\n\r\n      var states = criteria[key];\r\n\r\n      // it is possible to pass 'states' or 'state'\r\n      if (key === 'state') {\r\n        key = 'states';\r\n      }\r\n\r\n      return Object.keys(states).every(function (s) { return node[key][s] === states[s]; })\r\n    })\r\n  }\r\n}\r\n\r\nfunction isRegExp (val) {\r\n  return val instanceof RegExp\r\n}\r\n\r\nfunction getAllChildren (source) {\r\n  var result = [];\r\n\r\n  source.forEach(function collect (node) {\r\n    result.push(node);\r\n\r\n    if (node.children) {\r\n      node.children.forEach(collect);\r\n    }\r\n  });\r\n\r\n  return result\r\n}\r\n\r\nfunction find (source, criteria, deep) {\n  if ( deep === void 0 ) deep = true;\n\r\n  if (!source || !source.length || !criteria) {\r\n    return null\r\n  }\r\n\r\n  if (deep) {\r\n    source = getAllChildren(source);\r\n  }\r\n\r\n  // find by index\r\n  if (typeof criteria === 'number') {\r\n    return source[criteria] || null\r\n  }\r\n\r\n  if (typeof criteria === 'string' || criteria instanceof RegExp) {\r\n    criteria = {\r\n      text: criteria\r\n    };\r\n  }\r\n\r\n  if (typeof criteria !== 'function') {\r\n    criteria = finder(criteria);\r\n  }\r\n\r\n  var result = source.filter(criteria);\r\n\r\n  if (result.length) {\r\n    return result\r\n  }\r\n\r\n  return null\r\n}\n\n// it is not genuine GUIDs\r\n\r\nfunction s4 () {\r\n  return Math.floor((1 + Math.random()) * 0x10000)\r\n    .toString(16)\r\n    .substring(1)\r\n}\r\n\r\nfunction uuidV4 () {\r\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n    s4() + '-' + s4() + s4() + s4()\r\n}\n\nfunction nodeIterator (context, method) {\n  var args = [], len = arguments.length - 2;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 2 ];\n\r\n  context.forEach(function (node) { return node[method].apply(node, args); });\r\n}\r\n\r\nvar Selection = /*@__PURE__*/(function (Array) {\n  function Selection (tree, items) {\n    var ref;\n\n    if ( items === void 0 ) items = [];\r\n    /*eslint semi: 0 */\r\n    Array.call(this);\r\n\r\n    this.tree = tree;\r\n    (ref = this).push.apply(ref, items);\r\n  }\n\n  if ( Array ) Selection.__proto__ = Array;\n  Selection.prototype = Object.create( Array && Array.prototype );\n  Selection.prototype.constructor = Selection;\r\n\r\n  Selection.prototype.remove = function remove () {\r\n    nodeIterator(this, 'remove');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.expand = function expand () {\r\n    nodeIterator(this, 'expand');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.collapse = function collapse () {\r\n    nodeIterator(this, 'collapse');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.select = function select (extendList) {\r\n    nodeIterator(this, 'select', extendList);\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.unselect = function unselect () {\r\n    nodeIterator(this, 'unselect');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.check = function check () {\r\n    if (this.tree.options.checkbox) {\r\n      nodeIterator(this, 'check');\r\n    }\r\n\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.uncheck = function uncheck () {\r\n    if (this.tree.options.checkbox) {\r\n      nodeIterator(this, 'uncheck');\r\n    }\r\n\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.disable = function disable () {\r\n    nodeIterator(this, 'disable');\r\n    return this\r\n  };\r\n\r\n  Selection.prototype.enable = function enable () {\r\n    nodeIterator(this, 'enable');\r\n    return this\r\n  };\n\n  return Selection;\n}(Array));\n\nvar Node = function Node (tree, item) {\r\n  if (!item) {\r\n    throw new Error('Node can not be empty')\r\n  }\r\n\r\n  this.id = item.id || uuidV4();\r\n  this.states = item.state || {};\r\n\r\n  this.showChildren = true;\r\n  this.children = item.children || [];\r\n  this.parent = item.parent || null;\r\n\r\n  this.isBatch = item.isBatch || false;\r\n  this.isEditing = false;\r\n\r\n  this.data = Object.assign({}, item.data || {}, {\r\n    text: item.text\r\n  });\r\n\r\n  if (!tree) {\r\n    throw new Error('Node must have a Tree context!')\r\n  }\r\n\r\n  this.tree = tree;\r\n};\n\nvar prototypeAccessors = { key: { configurable: true },depth: { configurable: true },text: { configurable: true } };\r\n\r\nNode.prototype.$emit = function $emit (evnt) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.tree).$emit.apply(ref, [ (\"node:\" + evnt), this ].concat( args ));\r\n};\r\n\r\nNode.prototype.getPath = function getPath () {\r\n  if (!this.parent) {\r\n    return [this]\r\n  }\r\n\r\n  var path = [this];\r\n  var el = this;\r\n\r\n  while ((el = el.parent) !== null) {\r\n    path.push(el);\r\n  }\r\n\r\n  return path\r\n};\r\n\r\nprototypeAccessors.key.get = function () {\r\n  return this.id + this.text\r\n};\r\n\r\nprototypeAccessors.depth.get = function () {\r\n  var depth = 0;\r\n  var parent = this.parent;\r\n\r\n  if (!parent || this.showChildren === false) {\r\n    return depth\r\n  }\r\n\r\n  do {\r\n    depth++;\r\n  } while (parent = parent.parent)\r\n\r\n  return depth\r\n};\r\n\r\nprototypeAccessors.text.get = function () {\r\n  return this.data.text\r\n};\r\n\r\nprototypeAccessors.text.set = function (text) {\r\n  var oldText = this.text;\r\n\r\n  if (oldText !== text) {\r\n    this.data.text = text;\r\n    this.$emit('text:changed', text, oldText);\r\n  }\r\n};\r\n\r\nNode.prototype.setData = function setData (data) {\r\n  this.data = Object.assign({}, this.data, data);\r\n\r\n  this.$emit('data:changed', this.data);\r\n\r\n  return this.data\r\n};\r\n\r\nNode.prototype.state = function state (name, value) {\r\n  if (undefined === value) {\r\n    return this.states[name]\r\n  }\r\n\r\n  // TODO: check if it for example `selectable` state it should unselect node\r\n\r\n  this.states[name] = value;\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.recurseUp = function recurseUp (fn, node) {\n    if ( node === void 0 ) node = this;\n\r\n  if (!node.parent) {\r\n    return\r\n  }\r\n\r\n  if (fn(node.parent) !== false) {\r\n    return this.recurseUp(fn, node.parent)\r\n  }\r\n};\r\n\r\nNode.prototype.recurseDown = function recurseDown$1 (fn, ignoreThis) {\r\n  if (ignoreThis !== true) {\r\n    fn(this);\r\n  }\r\n\r\n  if (this.hasChildren()) {\r\n    recurseDown(this.children, fn);\r\n  }\r\n};\r\n\r\nNode.prototype.refreshIndeterminateState = function refreshIndeterminateState () {\r\n  if (!this.tree.options.autoCheckChildren) {\r\n    return this\r\n  }\r\n\r\n  this.state('indeterminate', false);\r\n\r\n  if (this.hasChildren()) {\r\n    var childrenCount = this.children.length;\r\n    var checked = 0;\r\n    var indeterminate = 0;\r\n    var disabled = 0;\r\n\r\n    this.children.forEach(function (child) {\r\n      if (child.checked()) {\r\n        checked++;\r\n      }\r\n\r\n      if (child.disabled()) {\r\n        disabled++;\r\n      }\r\n\r\n      if (child.indeterminate()) {\r\n        indeterminate++;\r\n      }\r\n    });\r\n\r\n    if (checked > 0 && checked === childrenCount - disabled) {\r\n      if (!this.checked()) {\r\n        this.state('checked', true);\r\n        this.tree.check(this);\r\n\r\n        this.$emit('checked');\r\n      }\r\n    } else {\r\n      if (this.checked()) {\r\n        this.state('checked', false);\r\n        this.tree.uncheck(this);\r\n\r\n        this.$emit('unchecked');\r\n      }\r\n\r\n      this.state(\r\n        'indeterminate',\r\n        indeterminate > 0 || (checked > 0 && checked < childrenCount)\r\n      );\r\n    }\r\n  }\r\n\r\n  if (this.parent) {\r\n    this.parent.refreshIndeterminateState();\r\n  }\r\n};\r\n\r\nNode.prototype.indeterminate = function indeterminate () {\r\n  return this.state('indeterminate')\r\n};\r\n\r\nNode.prototype.editable = function editable () {\r\n  return !this.state('disabled') && this.state('editable')\r\n};\r\n\r\nNode.prototype.selectable = function selectable () {\r\n  return !this.state('disabled') && this.state('selectable')\r\n};\r\n\r\nNode.prototype.selected = function selected () {\r\n  return this.state('selected')\r\n};\r\n\r\nNode.prototype.select = function select (extendList) {\r\n  if (!this.selectable() || this.selected()) {\r\n    return this\r\n  }\r\n\r\n  this.tree.select(this, extendList);\r\n\r\n  this.state('selected', true);\r\n  this.$emit('selected');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.unselect = function unselect () {\r\n  if (!this.selectable() || !this.selected()) {\r\n    return this\r\n  }\r\n\r\n  this.tree.unselect(this);\r\n\r\n  this.state('selected', false);\r\n  this.$emit('unselected');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.checked = function checked () {\r\n  return this.state('checked')\r\n};\r\n\r\nNode.prototype.check = function check () {\n    var this$1 = this;\n\r\n  if (this.checked() || this.disabled()) {\r\n    return this\r\n  }\r\n\r\n  if (this.indeterminate()) {\r\n    return this.uncheck()\r\n  }\r\n\r\n  var checkDisabledChildren = this.tree.options.checkDisabledChildren;\r\n  var targetNode = this;\r\n\r\n  if (this.tree.options.autoCheckChildren) {\r\n    this.recurseDown(function (node) {\r\n      node.state('indeterminate', false);\r\n\r\n      if (node.disabled() && !checkDisabledChildren) {\r\n        return\r\n      }\r\n\r\n      if (!node.checked()) {\r\n        this$1.tree.check(node);\r\n\r\n        node.state('checked', true);\r\n        node.$emit('checked', node.id === targetNode.id ? undefined : targetNode);\r\n      }\r\n    });\r\n\r\n    if (this.parent) {\r\n      this.parent.refreshIndeterminateState();\r\n    }\r\n  } else {\r\n    this.tree.check(this);\r\n\r\n    this.state('checked', true);\r\n    this.$emit('checked');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.uncheck = function uncheck () {\n    var this$1 = this;\n\r\n  if (!this.indeterminate() && !this.checked() || this.disabled()) {\r\n    return this\r\n  }\r\n\r\n  var targetNode = this;\r\n\r\n  if (this.tree.options.autoCheckChildren) {\r\n    this.recurseDown(function (node) {\r\n      node.state('indeterminate', false);\r\n\r\n      if (node.checked()) {\r\n        this$1.tree.uncheck(node);\r\n\r\n        node.state('checked', false);\r\n        node.$emit('unchecked', node.id === targetNode.id ? undefined : targetNode);\r\n      }\r\n    });\r\n\r\n    if (this.parent) {\r\n      this.parent.refreshIndeterminateState();\r\n    }\r\n  } else {\r\n    this.tree.uncheck(this);\r\n\r\n    this.state('checked', false);\r\n    this.$emit('unchecked');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.show = function show () {\r\n  if (this.visible()) {\r\n    return this\r\n  }\r\n\r\n  this.state('visible', true);\r\n  this.$emit('shown');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.hide = function hide () {\r\n  if (this.hidden()) {\r\n    return this\r\n  }\r\n\r\n  this.state('visible', false);\r\n  this.$emit('hidden');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.visible = function visible () {\r\n  return this.state('visible')\r\n};\r\n\r\nNode.prototype.hidden = function hidden () {\r\n  return !this.state('visible')\r\n};\r\n\r\nNode.prototype.enable = function enable () {\r\n  if (this.enabled()) {\r\n    return this\r\n  }\r\n\r\n  if (this.tree.options.autoDisableChildren) {\r\n    this.recurseDown(function (node) {\r\n      if (node.disabled()) {\r\n        node.state('disabled', false);\r\n        node.$emit('enabled');\r\n      }\r\n    });\r\n  } else {\r\n    this.state('disabled', false);\r\n    this.$emit('enabled');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.enabled = function enabled () {\r\n  return !this.state('disabled')\r\n};\r\n\r\nNode.prototype.disable = function disable () {\r\n  if (this.disabled()) {\r\n    return this\r\n  }\r\n\r\n  if (this.tree.options.autoDisableChildren) {\r\n    this.recurseDown(function (node) {\r\n      if (node.enabled()) {\r\n        node.state('disabled', true);\r\n        node.$emit('disabled');\r\n      }\r\n    });\r\n  } else {\r\n    this.state('disabled', true);\r\n    this.$emit('disabled');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.disabled = function disabled () {\r\n  return this.state('disabled')\r\n};\r\n\r\nNode.prototype.expandTop = function expandTop (ignoreEvent) {\n    var this$1 = this;\n\r\n  this.recurseUp(function (parent) {\r\n    parent.state('expanded', true);\r\n\r\n    if (ignoreEvent !== true) {\r\n      this$1.$emit('expanded', parent);\r\n    }\r\n  });\r\n};\r\n\r\nNode.prototype.expand = function expand () {\n    var this$1 = this;\n\r\n  if (!this.canExpand()) {\r\n    return this\r\n  }\r\n\r\n  if (this.isBatch) {\r\n    this.tree.loadChildren(this).then(function (_) {\r\n      this$1.state('expanded', true);\r\n      this$1.$emit('expanded');\r\n    });\r\n  } else {\r\n    this.state('expanded', true);\r\n    this.$emit('expanded');\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.canExpand = function canExpand () {\r\n  if (this.disabled() || !this.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  return this.collapsed() &&\r\n    (!this.tree.autoDisableChildren || this.disabled())\r\n};\r\n\r\nNode.prototype.canCollapse = function canCollapse () {\r\n  if (this.disabled() || !this.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  return this.expanded() &&\r\n    (!this.tree.autoDisableChildren || this.disabled())\r\n};\r\n\r\nNode.prototype.expanded = function expanded () {\r\n  return this.state('expanded')\r\n};\r\n\r\nNode.prototype.collapse = function collapse () {\r\n  if (!this.canCollapse()) {\r\n    return this\r\n  }\r\n\r\n  this.state('expanded', false);\r\n  this.$emit('collapsed');\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.collapsed = function collapsed () {\r\n  return !this.state('expanded')\r\n};\r\n\r\nNode.prototype.toggleExpand = function toggleExpand () {\r\n  return this._toggleOpenedState()\r\n};\r\n\r\nNode.prototype.toggleCollapse = function toggleCollapse () {\r\n  return this._toggleOpenedState()\r\n};\r\n\r\nNode.prototype._toggleOpenedState = function _toggleOpenedState () {\r\n  if (this.canCollapse()) {\r\n    return this.collapse()\r\n  } else if (this.canExpand()) {\r\n    return this.expand()\r\n  }\r\n};\r\n\r\nNode.prototype.isDropable = function isDropable () {\r\n  return this.enabled() && this.state('dropable')\r\n};\r\n\r\nNode.prototype.isDraggable = function isDraggable () {\r\n  return this.enabled() && this.state('draggable') && !this.isEditing\r\n};\r\n\r\nNode.prototype.startDragging = function startDragging () {\r\n  if (!this.isDraggable() || this.state('dragging')) {\r\n    return false\r\n  }\r\n\r\n  // root element\r\n  if (this.isRoot() && this.tree.model.length === 1) {\r\n    return false\r\n  }\r\n\r\n  if (this.tree.options.store) {\r\n    this.tree.__silence = true;\r\n  }\r\n\r\n  this.select();\r\n  this.state('dragging', true);\r\n  this.$emit('dragging:start');\r\n\r\n  this.tree.__silence = false;\r\n\r\n  return true\r\n};\r\n\r\nNode.prototype.finishDragging = function finishDragging (destination, destinationPosition) {\r\n  if (!destination.isDropable() && destinationPosition === 'drag-on') {\r\n    return\r\n  }\r\n\r\n  var tree = this.tree;\r\n  var clone = this.clone();\r\n  var parent = this.parent;\r\n\r\n  clone.id = this.id;\r\n  tree.__silence = true;\r\n\r\n  this.remove();\r\n\r\n  if (destinationPosition === 'drag-on') {\r\n    tree.append(destination, clone);\r\n  } else if (destinationPosition === 'drag-below') {\r\n    tree.after(destination, clone);\r\n  } else if (destinationPosition === 'drag-above') {\r\n    tree.before(destination, clone);\r\n  }\r\n\r\n  destination.refreshIndeterminateState();\r\n\r\n  parent && parent.refreshIndeterminateState();\r\n  tree.__silence = false;\r\n\r\n  clone.state('dragging', false);\r\n  this.state('dragging', false);\r\n  // need to call emit on the clone, because we need to have node.parent filled in the event listener\r\n  clone.$emit('dragging:finish', destination, destinationPosition);\r\n\r\n  if (clone.state('selected')) {\r\n    tree.selectedNodes.remove(this);\r\n    tree.selectedNodes.add(clone);\r\n\r\n    tree.vm.$set(this.state, 'selected', false);\r\n    tree.vm.$set(clone.state, 'selected', true);\r\n  }\r\n\r\n  if (this.tree.options.store) {\r\n    this.tree.vm.$emit('LIQUOR_NOISE');\r\n  }\r\n};\r\n\r\nNode.prototype.startEditing = function startEditing () {\r\n  if (this.disabled()) {\r\n    return false\r\n  }\r\n\r\n  if (!this.isEditing) {\r\n    this.tree._editingNode = this;\r\n    this.tree.activeElement = this;\r\n    this.isEditing = true;\r\n    this.$emit('editing:start');\r\n  }\r\n};\r\n\r\nNode.prototype.stopEditing = function stopEditing (newText) {\r\n  if (!this.isEditing) {\r\n    return\r\n  }\r\n\r\n  this.isEditing = false;\r\n  this.tree._editingNode = null;\r\n  this.tree.activeElement = null;\r\n\r\n  var prevText = this.text;\r\n\r\n  if (newText && newText !== false && this.text !== newText) {\r\n    this.text = newText;\r\n  }\r\n\r\n  this.$emit('editing:stop', prevText);\r\n};\r\n\r\nNode.prototype.index = function index (verbose) {\r\n  return this.tree.index(this, verbose)\r\n};\r\n\r\nNode.prototype.first = function first () {\r\n  if (!this.hasChildren()) {\r\n    return null\r\n  }\r\n\r\n  return this.children[0]\r\n};\r\n\r\nNode.prototype.last = function last () {\r\n  if (!this.hasChildren()) {\r\n    return null\r\n  }\r\n\r\n  return this.children[this.children.length - 1]\r\n};\r\n\r\nNode.prototype.next = function next () {\r\n  return this.tree.nextNode(this)\r\n};\r\n\r\nNode.prototype.prev = function prev () {\r\n  return this.tree.prevNode(this)\r\n};\r\n\r\nNode.prototype.insertAt = function insertAt (node, index) {\n    var this$1 = this;\n    if ( index === void 0 ) index = this.children.length;\n\r\n  if (!node) {\r\n    return\r\n  }\r\n\r\n  node = this.tree.objectToNode(node);\r\n\r\n  if (Array.isArray(node)) {\r\n    node\r\n      .reverse()\r\n      .map(function (n) { return this$1.insertAt(n, index); });\r\n\r\n    return new Selection(this.tree, [].concat( node ))\r\n  }\r\n\r\n  node.parent = this;\r\n\r\n  this.children.splice(\r\n    index, 0, node\r\n  );\r\n\r\n  if (node.disabled() && node.hasChildren()) {\r\n    node.recurseDown(function (child) {\r\n      child.state('disabled', true);\r\n    });\r\n  }\r\n\r\n  if (!this.isBatch) {\r\n    this.$emit('added', node);\r\n  }\r\n\r\n  return node\r\n};\r\n\r\nNode.prototype.addChild = function addChild (node) {\r\n  return this.insertAt(node)\r\n};\r\n\r\nNode.prototype.append = function append (node) {\r\n  return this.addChild(node)\r\n};\r\n\r\nNode.prototype.prepend = function prepend (node) {\r\n  return this.insertAt(node, 0)\r\n};\r\n\r\nNode.prototype.before = function before (node) {\r\n  return this.tree.before(this, node)\r\n};\r\n\r\nNode.prototype.after = function after (node) {\r\n  return this.tree.after(this, node)\r\n};\r\n\r\nNode.prototype.empty = function empty () {\r\n  var node;\r\n\r\n  while (node = this.children.pop()) {\r\n    node.remove();\r\n  }\r\n\r\n  return this\r\n};\r\n\r\nNode.prototype.remove = function remove () {\r\n  return this.tree.removeNode(this)\r\n};\r\n\r\nNode.prototype.removeChild = function removeChild (criteria) {\r\n  var node = this.find(criteria);\r\n\r\n  if (node) {\r\n    return this.tree.removeNode(node)\r\n  }\r\n\r\n  return null\r\n};\r\n\r\nNode.prototype.find = function find$1 (criteria, deep) {\r\n  if (this.tree.isNode(criteria)) {\r\n    return criteria\r\n  }\r\n\r\n  return find(this.children, criteria, deep)\r\n};\r\n\r\nNode.prototype.focus = function focus () {\r\n  if (this.vm) {\r\n    this.vm.focus();\r\n  }\r\n};\r\n\r\nNode.prototype.hasChildren = function hasChildren () {\r\n  return this.showChildren && this.isBatch || this.children.length > 0\r\n};\r\n\r\n/**\r\n* Sometimes it's no need to have a parent. It possible to have more than 1 parent\r\n*/\r\nNode.prototype.isRoot = function isRoot () {\r\n  return this.parent === null\r\n};\r\n\r\nNode.prototype.clone = function clone () {\r\n  return this.tree.objectToNode(this.toJSON())\r\n};\r\n\r\nNode.prototype.toJSON = function toJSON () {\n    var this$1 = this;\n\r\n  return {\r\n    text: this.text,\r\n    data: this.data,\r\n    state: this.states,\r\n    children: this.children.map(function (node) { return this$1.tree.objectToNode(node).toJSON(); })\r\n  }\r\n};\n\nObject.defineProperties( Node.prototype, prototypeAccessors );\n\n/**\r\n* Default Node's states\r\n*/\r\nvar nodeStates = {\r\n  selected: false,\r\n  selectable: true,\r\n  checked: false,\r\n  expanded: false,\r\n  disabled: false,\r\n  visible: true,\r\n  indeterminate: false,\r\n  matched: false,\r\n  editable: true,\r\n  dragging: false,\r\n  draggable: true,\r\n  dropable: true\r\n};\r\n\r\nfunction merge (state) {\n  if ( state === void 0 ) state = {};\n\r\n  return Object.assign({}, nodeStates, state)\r\n}\r\n\r\nfunction objectToNode (tree, obj) {\r\n  var node = null;\r\n\r\n  if (obj instanceof Node) {\r\n    return obj\r\n  }\r\n\r\n  if (typeof obj === 'string') {\r\n    node = new Node(tree, {\r\n      text: obj,\r\n      state: merge(),\r\n      id: uuidV4()\r\n    });\r\n  } else if (Array.isArray(obj)) {\r\n    return obj.map(function (o) { return objectToNode(tree, o); })\r\n  } else {\r\n    node = new Node(tree, obj);\r\n    node.states = merge(node.states);\r\n\r\n    if (!node.id) {\r\n      node.id = uuidV4();\r\n    }\r\n\r\n    if (node.children.length) {\r\n      node.children = node.children.map(function (child) {\r\n        child = objectToNode(tree, child);\r\n        child.parent = node;\r\n\r\n        return child\r\n      });\r\n    }\r\n  }\r\n\r\n  return node\r\n}\n\nvar List = /*@__PURE__*/(function (Array) {\n  function List () {\n    Array.apply(this, arguments);\n  }\n\n  if ( Array ) List.__proto__ = Array;\n  List.prototype = Object.create( Array && Array.prototype );\n  List.prototype.constructor = List;\n\n  List.prototype.empty = function empty () {\r\n    this.splice(0, this.length);\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.has = function has (item) {\r\n    return this.includes(item)\r\n  };\r\n\r\n  List.prototype.add = function add () {\n    var ref;\n\n    var items = [], len = arguments.length;\n    while ( len-- ) items[ len ] = arguments[ len ];\r\n    (ref = this).push.apply(ref, items);\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.remove = function remove (item) {\r\n    var index = this.indexOf(item);\r\n\r\n    if (index === -1) {\r\n      return this\r\n    }\r\n\r\n    this.splice(index, 1);\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.removeAll = function removeAll (item) {\r\n    while (this.includes(item)) {\r\n      this.remove(item);\r\n    }\r\n\r\n    return this\r\n  };\r\n\r\n  List.prototype.top = function top () {\r\n    return this[this.length - 1]\r\n  };\n\n  return List;\n}(Array));\n\n/**\r\n  Every Node has certain format:\r\n  {\r\n    id,           // Unique Node id. By default it generates using uuidV4\r\n    text,         // Node text\r\n    children,     // List of children. Each children has the same format\r\n    parent,       // Parent Node or null. The tree is able to have more than 1 root node\r\n    state,        // States of Node. Ex.: selected, checked and so on\r\n    data          // Any types of data. It is similar to `storage`.\r\n                  // Ex.: data: {myAwesomeProperty: 10}. To get this property you need: Node.data('myAwesomeProperty')\r\n  }\r\n*/\r\n\r\nvar defaultPropertyNames = {\r\n  id: 'id',\r\n  text: 'text',\r\n  children: 'children',\r\n  state: 'state',\r\n  data: 'data',\r\n  isBatch: 'isBatch'\r\n};\r\n\r\nfunction convertNames (obj, names) {\r\n  return {\r\n    id: obj[names.id],\r\n    text: obj[names.text],\r\n    children: obj[names.children],\r\n    state: obj[names.state],\r\n    data: obj[names.data],\r\n    isBatch: obj[names.isBatch]\r\n  }\r\n}\r\n\r\nvar TreeParser = {\r\n  parse: function parse (data, tree, options) {\n    if ( options === void 0 ) options = {};\n\r\n    if (typeof data === 'string') {\r\n      data = JSON.parse(data);\r\n    }\r\n\r\n    if (!Array.isArray(data)) {\r\n      data = [data];\r\n    }\r\n\r\n    var p = Object.assign(\r\n      {},\r\n      defaultPropertyNames,\r\n      options\r\n    );\r\n\r\n    var preparedItems = data.map(function converter (item) {\r\n      var convertedItem = convertNames(item, p);\r\n\r\n      // Possible to receive 1 child like a simple object. It must be converted to an array\r\n      // We do not have checks on the correctness of the format. A developer should pass correct format\r\n      if (convertedItem.children && !Array.isArray(convertedItem.children)) {\r\n        convertedItem.children = [convertedItem.children];\r\n      }\r\n\r\n      if (convertedItem.children) {\r\n        convertedItem.children = convertedItem.children.map(converter);\r\n      }\r\n\r\n      return convertedItem\r\n    });\r\n\r\n    return preparedItems.map(function (item) { return objectToNode(tree, item); })\r\n  }\r\n};\n\n/*eslint no-undef: 0 */\r\n\r\nfunction request (url) {\r\n  return new Promise(function (resolve, reject) {\r\n    var xhr = new XMLHttpRequest();\r\n\r\n    xhr.open('GET', url);\r\n    xhr.setRequestHeader('Content-Type', 'application/json');\r\n    xhr.addEventListener('load', function (_) {\r\n      try {\r\n        var response = JSON.parse(xhr.response);\r\n\r\n        resolve(response);\r\n      } catch (e) {\r\n        reject(e);\r\n      }    });\r\n\r\n    xhr.send(null);\r\n  })\r\n}\r\n\r\nfunction get (url) {\r\n  return request(url)\r\n}\r\n\r\nfunction createTemplate (template) {\r\n  return function (source) {\r\n    var re = /{([^}]+)}/;\r\n    var m;\r\n    var result = template;\r\n\r\n    while (m = re.exec(result)) {\r\n      result = result.replace(m[0], source[m[1]]);\r\n    }\r\n\r\n    return result\r\n  }\r\n}\n\nfunction orderAsc (node0, node1) {\r\n  if (node0.text < node1.text) {\r\n    return -1\r\n  }\r\n\r\n  if (node0.text > node1.text) {\r\n    return 1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nfunction orderDesc (node0, node1) {\r\n  if (node0.text < node1.text) {\r\n    return 1\r\n  }\r\n\r\n  if (node0.text > node1.text) {\r\n    return -1\r\n  }\r\n\r\n  return 0\r\n}\r\n\r\nfunction getCompareFunction (order) {\r\n  switch (order.toLowerCase()) {\r\n    case 'asc': return orderAsc\r\n    case 'desc': return orderDesc\r\n  }\r\n}\r\n\r\nfunction sort (source, compareFunction) {\r\n  if (typeof compareFunction === 'string') {\r\n    compareFunction = getCompareFunction(compareFunction);\r\n  }\r\n\r\n  if (Array.isArray(source) && typeof compareFunction === 'function') {\r\n    source.sort(compareFunction);\r\n  }\r\n}\n\nfunction fetchDelay (ms) {\r\n  return new Promise(function (resolve) {\r\n    setTimeout(resolve, ms);\r\n  })\r\n}\n\nvar Tree = function Tree (vm) {\n  var this$1 = this;\n\r\n  this.vm = vm;\r\n  this.options = vm.opts;\r\n\r\n  this.activeElement = null;\r\n\r\n  // We have to convert 'fetchData' to function. It must return Promise always\r\n  var fetchData = this.options.fetchData;\r\n\r\n  if (typeof fetchData === 'string') {\r\n    this.options.fetchData = (function (template) {\r\n      var urlTemplate = createTemplate(template);\r\n\r\n      return function (node) {\r\n        return get(urlTemplate(node)).catch(this$1.options.onFetchError)\r\n      }\r\n    })(fetchData);\r\n  }\r\n};\r\n\r\nTree.prototype.$on = function $on (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.vm).$on.apply(ref, [ name ].concat( args ));\r\n};\r\n\r\nTree.prototype.$once = function $once (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.vm).$once.apply(ref, [ name ].concat( args ));\r\n};\r\n\r\nTree.prototype.$off = function $off (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  (ref = this.vm).$off.apply(ref, [ name ].concat( args ));\r\n};\r\n\r\nTree.prototype.$emit = function $emit (name) {\n    var ref;\n\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\r\n  if (this.__silence) {\r\n    return\r\n  }\r\n\r\n  (ref = this.vm).$emit.apply(ref, [ name ].concat( args ));\r\n\r\n  if (this.options.store) {\r\n    this.vm.$emit('LIQUOR_NOISE');\r\n  }\r\n};\r\n\r\nTree.prototype._sort = function _sort (source, compareFn, deep) {\r\n  if (deep !== false) {\r\n    this.recurseDown(source, function (node) {\r\n      if (node.hasChildren()) {\r\n        sort(node.children, compareFn);\r\n      }\r\n    });\r\n  }\r\n\r\n  sort(source, compareFn);\r\n};\r\n\r\nTree.prototype.sortTree = function sortTree (compareFn, deep) {\r\n  this._sort(this.model, compareFn, deep);\r\n};\r\n\r\nTree.prototype.sort = function sort$$1 (query, compareFn, deep) {\n    var this$1 = this;\n\r\n  var targetNode = this.find(query, true);\r\n\r\n  if (!targetNode || !compareFn) {\r\n    return\r\n  }\r\n\r\n  targetNode.forEach(function (node) {\r\n    this$1._sort(node.children, compareFn, deep);\r\n  });\r\n};\r\n\r\nTree.prototype.clearFilter = function clearFilter () {\r\n  this.recurseDown(function (node) {\r\n    node.state('matched', false);\r\n    node.state('visible', true);\r\n    node.state('expanded', node.__expanded);\r\n\r\n    node.__expanded = undefined;\r\n    node.showChildren = true;\r\n  });\r\n\r\n  this.vm.matches.length = 0;\r\n  this.vm.$emit('tree:filtered', [], '');\r\n};\r\n\r\nTree.prototype.filter = function filter (query) {\r\n  if (!query) {\r\n    return this.clearFilter()\r\n  }\r\n\r\n  var matches = [];\r\n  var predicate = this.options.filter.matcher;\r\n  var ref = this.options.filter;\n    var showChildren = ref.showChildren;\n    var plainList = ref.plainList;\r\n\r\n  // collect nodes\r\n  this.recurseDown(function (node) {\r\n    if (predicate(query, node)) {\r\n      matches.push(node);\r\n    }\r\n\r\n    node.showChildren = true;\r\n\r\n    // save prev `expanded` state\r\n    if (undefined === node.__expanded) {\r\n      node.__expanded = node.state('expanded');\r\n    }\r\n\r\n    node.state('visible', false);\r\n    node.state('matched', false);\r\n    node.state('expanded', true);\r\n  });\r\n\r\n  matches.reverse().forEach(function (node) {\r\n    node.state('matched', true);\r\n    node.state('visible', true);\r\n\r\n    node.showChildren = !plainList;\r\n\r\n    if (node.hasChildren()) {\r\n      node.recurseDown(function (n) {\r\n        n.state('visible', !!showChildren);\r\n      }, true);\r\n    }\r\n\r\n    node.recurseUp(function (parent) {\r\n      parent.state('visible', true);\r\n      parent.state('expanded', true);\r\n    });\r\n\r\n    if (node.hasChildren()) {\r\n      node.state('expanded', false);\r\n    }\r\n  });\r\n\r\n  this.vm.matches = matches;\r\n\r\n  this.vm.$emit('tree:filtered', matches, query);\r\n\r\n  return matches\r\n};\r\n\r\nTree.prototype.selected = function selected () {\r\n  return new (Function.prototype.bind.apply( Selection, [ null ].concat( [this], this.selectedNodes) ))\r\n};\r\n\r\nTree.prototype.checked = function checked () {\r\n  if (!this.options.checkbox) {\r\n    return null\r\n  }\r\n\r\n  return new (Function.prototype.bind.apply( Selection, [ null ].concat( [this], this.checkedNodes) ))\r\n};\r\n\r\nTree.prototype.loadChildren = function loadChildren (node) {\n    var this$1 = this;\n\r\n  if (!node) {\r\n    return\r\n  }\r\n\r\n  this.$emit('tree:data:fetch', node);\r\n\r\n  if (this.options.minFetchDelay > 0 && node.vm) {\r\n    node.vm.loading = true;\r\n  }\r\n\r\n  var result = this.fetch(node)\r\n    .then(function (children) {\r\n      node.append(children);\r\n      node.isBatch = false;\r\n\r\n      if (this$1.options.autoCheckChildren) {\r\n        if (node.checked()) {\r\n          node.recurseDown(function (child) {\r\n            child.state('checked', true);\r\n          });\r\n        }\r\n\r\n        node.refreshIndeterminateState();\r\n      }\r\n\r\n      this$1.$emit('tree:data:received', node);\r\n    });\r\n\r\n  return Promise.all([\r\n    fetchDelay(this.options.minFetchDelay),\r\n    result\r\n  ]).then(function (_) {\r\n    if (node.vm) {\r\n      node.vm.loading = false;\r\n    }\r\n\r\n    return result\r\n  })\r\n};\r\n\r\nTree.prototype.fetch = function fetch (node, parseData) {\n    var this$1 = this;\n\r\n  var result = this.options.fetchData(node);\r\n\r\n  if (!result.then) {\r\n    result = get(result)\r\n      .catch(this.options.onFetchError);\r\n  }\r\n\r\n  if (parseData === false) {\r\n    return result\r\n  }\r\n\r\n  return result\r\n    .then(function (data) {\r\n      try {\r\n        return this$1.parse(data, this$1.options.modelParse)\r\n      } catch (e) {\r\n        throw new Error(e)\r\n      }\r\n    })\r\n    .catch(this.options.onFetchError)\r\n};\r\n\r\nTree.prototype.fetchInitData = function fetchInitData () {\r\n  // simulate root node\r\n  var node = {\r\n    id: 'root',\r\n    name: 'root'\r\n  };\r\n\r\n  return this.fetch(node, false)\r\n};\r\n\r\nTree.prototype.setModel = function setModel (data) {\n    var this$1 = this;\n\r\n  return new Promise(function (resolve) {\r\n    this$1.model = this$1.parse(data, this$1.options.modelParse);\r\n\r\n    /* eslint-disable */\r\n    requestAnimationFrame(function (_) {\r\n      this$1.vm.model = this$1.model;\r\n      resolve();\r\n    });\r\n    /* eslint-enable */\r\n\r\n    /**\r\n    * VueJS transform properties to reactives when constructor is running\r\n    * And we lose List object (extended from Array)\r\n    */\r\n    this$1.selectedNodes = new List();\r\n    this$1.checkedNodes = new List();\r\n\r\n    recurseDown(this$1.model, function (node) {\r\n      node.tree = this$1;\r\n\r\n      if (node.selected()) {\r\n        this$1.selectedNodes.add(node);\r\n      }\r\n\r\n      if (node.checked()) {\r\n        this$1.checkedNodes.add(node);\r\n\r\n        if (node.parent) {\r\n          node.parent.refreshIndeterminateState();\r\n        }\r\n      }\r\n\r\n      if (this$1.options.autoDisableChildren && node.disabled()) {\r\n        node.recurseDown(function (child) {\r\n          child.state('disabled', true);\r\n        });\r\n      }\r\n    });\r\n\r\n    if (!this$1.options.multiple && this$1.selectedNodes.length) {\r\n      var top = this$1.selectedNodes.top();\r\n\r\n      this$1.selectedNodes.forEach(function (node) {\r\n        if (top !== node) {\r\n          node.state('selected', false);\r\n        }\r\n      });\r\n\r\n      this$1.selectedNodes\r\n        .empty()\r\n        .add(top);\r\n    }\r\n\r\n    // Nodes can't be selected on init. By it's possible to select through API\r\n    if (this$1.options.checkOnSelect && this$1.options.checkbox) {\r\n      this$1.unselectAll();\r\n    }\r\n  })\r\n};\r\n\r\nTree.prototype.recurseDown = function recurseDown$1 (node, fn) {\r\n  if (!fn && node) {\r\n    fn = node;\r\n    node = this.model;\r\n  }\r\n\r\n  return recurseDown(node, fn)\r\n};\r\n\r\nTree.prototype.select = function select (node, extendList) {\r\n  var treeNode = this.getNode(node);\r\n\r\n  if (!treeNode) {\r\n    return false\r\n  }\r\n\r\n  if (this.options.multiple && extendList) {\r\n    this.selectedNodes.add(treeNode);\r\n  } else {\r\n    this.unselectAll();\r\n    this.selectedNodes\r\n      .empty()\r\n      .add(treeNode);\r\n  }\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.selectAll = function selectAll () {\n    var this$1 = this;\n\r\n  if (!this.options.multiple) {\r\n    return false\r\n  }\r\n\r\n  this.selectedNodes.empty();\r\n\r\n  this.recurseDown(function (node) {\r\n    this$1.selectedNodes.add(\r\n      node.select(true)\r\n    );\r\n  });\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.unselect = function unselect (node) {\r\n  var treeNode = this.getNode(node);\r\n\r\n  if (!treeNode) {\r\n    return false\r\n  }\r\n\r\n  this.selectedNodes.remove(treeNode);\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.unselectAll = function unselectAll () {\r\n  var node;\r\n\r\n  while (node = this.selectedNodes.pop()) {\r\n    node.unselect();\r\n  }\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.check = function check (node) {\r\n  this.checkedNodes.add(node);\r\n};\r\n\r\nTree.prototype.uncheck = function uncheck (node) {\r\n  this.checkedNodes.remove(node);\r\n};\r\n\r\nTree.prototype.checkAll = function checkAll () {\r\n  this.recurseDown(function (node) {\r\n    if (node.depth === 0) {\r\n      if (node.indeterminate()) {\r\n        node.state('indeterminate', false);\r\n      }\r\n\r\n      node.check();\r\n    }\r\n  });\r\n};\r\n\r\nTree.prototype.uncheckAll = function uncheckAll () {\r\n  var node;\r\n\r\n  while (node = this.checkedNodes.pop()) {\r\n    node.uncheck();\r\n  }\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.expand = function expand (node) {\r\n  if (node.expanded()) {\r\n    return false\r\n  }\r\n\r\n  node.expand();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.collapse = function collapse (node) {\r\n  if (node.collapsed()) {\r\n    return false\r\n  }\r\n\r\n  node.collapse();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.toggleExpand = function toggleExpand (node) {\r\n  if (!node.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  node.toggleExpand();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.toggleCollapse = function toggleCollapse (node) {\r\n  if (!node.hasChildren()) {\r\n    return false\r\n  }\r\n\r\n  node.toggleCollapse();\r\n\r\n  return true\r\n};\r\n\r\nTree.prototype.expandAll = function expandAll () {\r\n  this.recurseDown(function (node) {\r\n    if (node.hasChildren() && node.collapsed()) {\r\n      node.expand();\r\n    }\r\n  });\r\n};\r\n\r\nTree.prototype.collapseAll = function collapseAll () {\r\n  this.recurseDown(function (node) {\r\n    if (node.hasChildren() && node.expanded()) {\r\n      node.collapse();\r\n    }\r\n  });\r\n};\r\n\r\nTree.prototype.index = function index (node, verbose) {\r\n  var target = node.parent;\r\n\r\n  if (target) {\r\n    target = target.children;\r\n  } else {\r\n    target = this.model;\r\n  }\r\n\r\n  var index = target.indexOf(node);\r\n\r\n  if (verbose) {\r\n    return {\r\n      index: index,\r\n      target: target,\r\n      node: target[index]\r\n    }\r\n  }\r\n\r\n  return index\r\n};\r\n\r\nTree.prototype.nextNode = function nextNode (node) {\r\n  var ref = this.index(node, true);\n    var target = ref.target;\n    var index = ref.index;\r\n\r\n  return target[index + 1] || null\r\n};\r\n\r\nTree.prototype.nextVisibleNode = function nextVisibleNode (node) {\r\n  if (node.hasChildren() && node.expanded()) {\r\n    return node.first()\r\n  }\r\n\r\n  var nextNode = this.nextNode(node);\r\n\r\n  if (!nextNode && node.parent) {\r\n    return node.parent.next()\r\n  }\r\n\r\n  return nextNode\r\n};\r\n\r\nTree.prototype.prevNode = function prevNode (node) {\r\n  var ref = this.index(node, true);\n    var target = ref.target;\n    var index = ref.index;\r\n\r\n  return target[index - 1] || null\r\n};\r\n\r\nTree.prototype.prevVisibleNode = function prevVisibleNode (node) {\r\n  var prevNode = this.prevNode(node);\r\n\r\n  if (!prevNode) {\r\n    return node.parent\r\n  }\r\n\r\n  if (prevNode.hasChildren() && prevNode.expanded()) {\r\n    return prevNode.last()\r\n  }\r\n\r\n  return prevNode\r\n};\r\n\r\nTree.prototype.addToModel = function addToModel (node, index) {\n    var this$1 = this;\n    if ( index === void 0 ) index = this.model.length;\n\r\n  node = this.objectToNode(node);\r\n\r\n  this.model.splice(index, 0, node);\r\n  this.recurseDown(node, function (n) {\r\n    n.tree = this$1;\r\n  });\r\n\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.append = function append (criteria, node) {\r\n  var targetNode = this.find(criteria);\r\n\r\n  if (targetNode) {\r\n    return targetNode.append(node)\r\n  }\r\n\r\n  return false\r\n};\r\n\r\nTree.prototype.prepend = function prepend (criteria, node) {\r\n  var targetNode = this.find(criteria);\r\n\r\n  if (targetNode) {\r\n    return targetNode.prepend(node)\r\n  }\r\n\r\n  return false\r\n};\r\n\r\nTree.prototype.before = function before (targetNode, sourceNode) {\r\n  targetNode = this.find(targetNode);\r\n\r\n  var position = this.index(targetNode, true);\r\n  var node = this.objectToNode(sourceNode);\r\n\r\n  if (!~position.index) {\r\n    return false\r\n  }\r\n\r\n  position.target.splice(\r\n    position.index,\r\n    0,\r\n    node\r\n  );\r\n\r\n  node.parent = targetNode.parent;\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.after = function after (targetNode, sourceNode) {\r\n  targetNode = this.find(targetNode);\r\n\r\n  var position = this.index(targetNode, true);\r\n  var node = this.objectToNode(sourceNode);\r\n\r\n  if (!~position.index) {\r\n    return false\r\n  }\r\n\r\n  position.target.splice(\r\n    position.index + 1,\r\n    0,\r\n    node\r\n  );\r\n\r\n  node.parent = targetNode.parent;\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.addNode = function addNode (node) {\r\n  var index = this.model.length;\r\n\r\n  node = objectToNode(node);\r\n\r\n  this.model.splice(index, 0, node);\r\n  this.$emit('node:added', node);\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.remove = function remove (criteria, multiple) {\r\n  return this.removeNode(\r\n    this.find(criteria, multiple)\r\n  )\r\n};\r\n\r\nTree.prototype.removeNode = function removeNode (node) {\r\n  if (node instanceof Selection) {\r\n    return node.remove()\r\n  }\r\n\r\n  if (!node) {\r\n    return false\r\n  }\r\n\r\n  if (!node.parent) {\r\n    if (~this.model.indexOf(node)) {\r\n      this.model.splice(\r\n        this.model.indexOf(node),\r\n        1\r\n      );\r\n    }\r\n  } else {\r\n    var children = node.parent.children;\r\n\r\n    if (~children.indexOf(node)) {\r\n      children.splice(\r\n        children.indexOf(node),\r\n        1\r\n      );\r\n    }\r\n  }\r\n\r\n  if (node.parent) {\r\n    if (node.parent.indeterminate() && !node.parent.hasChildren()) {\r\n      node.parent.state('indeterminate', false);\r\n    }\r\n  }\r\n\r\n  if (this.activeElement !== null) {\r\n    if (node.id === this.activeElement.id) {\r\n      this.activeElement = null;\r\n    }\r\n  }\r\n\r\n  node.parent = null;\r\n\r\n  this.$emit('node:removed', node);\r\n\r\n  this.selectedNodes.remove(node);\r\n  this.checkedNodes.remove(node);\r\n\r\n  var matches = this.vm.matches;\r\n\r\n  if (matches && matches.length) {\r\n    if (matches.includes(node)) {\r\n      matches.splice(\r\n        matches.indexOf(node),\r\n        1\r\n      );\r\n    }\r\n  }\r\n\r\n  return node\r\n};\r\n\r\nTree.prototype.isNode = function isNode (node) {\r\n  return node instanceof Node\r\n};\r\n\r\nTree.prototype.find = function find$1 (criteria, multiple) {\r\n  if (this.isNode(criteria)) {\r\n    return criteria\r\n  }\r\n\r\n  var result = find(this.model, criteria);\r\n\r\n  if (!result || !result.length) {\r\n    return new Selection(this, [])\r\n  }\r\n\r\n  if (multiple === true) {\r\n    return new Selection(this, result)\r\n  }\r\n\r\n  return new Selection(this, [result[0]])\r\n};\r\n\r\nTree.prototype.updateData = function updateData (criteria, callback) {\r\n  var nodes = this.find(criteria);\r\n\r\n  nodes.forEach(function (node) { return node.setData(callback(node)); });\r\n\r\n  return nodes\r\n};\r\n\r\nTree.prototype.getNodeById = function getNodeById (id) {\r\n  var targetNode = null;\r\n\r\n  recurseDown(this.model, function (node) {\r\n    if ('' + node.id === id) {\r\n      targetNode = node;\r\n      return false\r\n    }\r\n  });\r\n\r\n  return targetNode\r\n};\r\n\r\nTree.prototype.getNode = function getNode (node) {\r\n  if (this.isNode(node)) {\r\n    return node\r\n  }\r\n\r\n  return null\r\n};\r\n\r\nTree.prototype.objectToNode = function objectToNode$1 (obj) {\r\n  return objectToNode(this, obj)\r\n};\r\n\r\nTree.prototype.parse = function parse (data, options) {\r\n  if (!options) {\r\n    options = this.options.propertyNames;\r\n  }\r\n\r\n  try {\r\n    return TreeParser.parse(data, this, options)\r\n  } catch (e) {\r\n    return []\r\n  }\r\n};\n\nvar keyCodes = {\r\n  'ARROW_LEFT': 37,\r\n  'ARROW_TOP': 38,\r\n  'ARROW_RIGHT': 39,\r\n  'ARROW_BOTTOM': 40,\r\n  'SPACE': 32,\r\n  'DELETE': 46,\r\n  'ENTER': 13,\r\n  'ESC': 27\r\n};\r\n\r\nvar codesArr = [37, 38, 39, 40, 32];\r\n\r\nfunction focusUp (tree, node) {\r\n  var prevNode = tree.prevVisibleNode(node);\r\n\r\n  if (!prevNode) {\r\n    return\r\n  }\r\n\r\n  if (prevNode.disabled()) {\r\n    return focusUp(tree, prevNode)\r\n  }\r\n\r\n  prevNode.focus();\r\n}\r\n\r\nfunction focusdDown (tree, node) {\r\n  var nextNode = tree.nextVisibleNode(node);\r\n\r\n  if (!nextNode) {\r\n    return\r\n  }\r\n\r\n  if (nextNode.disabled()) {\r\n    return focusdDown(tree, nextNode)\r\n  }\r\n\r\n  nextNode.focus();\r\n}\r\n\r\nfunction checkNode (tree, node) {\r\n  if (!tree.options.checkbox) {\r\n    return\r\n  }\r\n\r\n  if (node.checked()) {\r\n    node.uncheck();\r\n  } else {\r\n    node.check();\r\n  }\r\n}\r\n\r\nfunction leftArrow (tree, node) {\r\n  if (node.expanded()) {\r\n    node.collapse();\r\n  } else {\r\n    var parent = node.parent;\r\n\r\n    if (parent) {\r\n      parent.focus();\r\n    }\r\n  }\r\n}\r\n\r\nfunction rightArrow (tree, node) {\r\n  if (node.collapsed()) {\r\n    node.expand();\r\n  } else {\r\n    var first = node.first();\r\n\r\n    if (first) {\r\n      first.focus();\r\n    }\r\n  }\r\n}\r\n\r\nfunction deleteNode (tree, node) {\r\n  var deletion = tree.options.deletion;\r\n\r\n  if (deletion) {\r\n    if (typeof deletion === 'function') {\r\n      if (deletion(node) === true) {\r\n        node.remove();\r\n      }\r\n    } else if (deletion === true) {\r\n      node.remove();\r\n    }\r\n  }\r\n}\r\n\r\nfunction initKeyboardNavigation (tree) {\r\n  var vm = tree.vm;\r\n  var $el = vm.$el;\r\n\r\n  $el.addEventListener('keydown', function (e) {\r\n    var code = e.keyCode;\r\n    var node = tree.activeElement;\r\n\r\n    if (!tree.isNode(node)) {\r\n      return\r\n    }\r\n\r\n    if (node.isEditing) {\r\n      switch (code) {\r\n        case keyCodes.ESC: return node.stopEditing(false)\r\n      }\r\n    } else {\r\n      if (codesArr.includes(code)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n\r\n      switch (code) {\r\n        case keyCodes.ARROW_LEFT: return leftArrow(tree, node)\r\n        case keyCodes.ARROW_RIGHT: return rightArrow(tree, node)\r\n        case keyCodes.ARROW_TOP: return focusUp(tree, node)\r\n        case keyCodes.ARROW_BOTTOM: return focusdDown(tree, node)\r\n        case keyCodes.SPACE:\r\n        case keyCodes.ENTER: return checkNode(tree, node)\r\n        case keyCodes.DELETE: return deleteNode(tree, node)\r\n      }\r\n    }\r\n  }, true);\r\n}\n\nfunction assert (truth, message) {\r\n  if (truth === false) {\r\n    throw new Error(message)\r\n  }\r\n}\n\nfunction initEvents (vm) {\r\n  var ref = vm.opts;\n  var multiple = ref.multiple;\n  var checkbox = ref.checkbox;\r\n  var tree = vm.tree;\r\n\r\n  var emitter = function (obj) {\r\n    var selected = vm.selected();\r\n\r\n    if (!checkbox) {\r\n      vm.$emit('input', multiple ? selected : (selected[0] || null));\r\n    } else {\r\n      vm.$emit('input', {\r\n        selected: multiple ? selected : (selected[0] || null),\r\n        checked: vm.checked()\r\n      });\r\n    }\r\n  };\r\n\r\n  emitter();\r\n\r\n  tree.$on('node:selected', emitter);\r\n  tree.$on('node:unselected', emitter);\r\n\r\n  if (checkbox) {\r\n    tree.$on('node:checked', emitter);\r\n    tree.$on('node:unchecked', emitter);\r\n  }\r\n\r\n  tree.$on('node:added', function (targetNode, newNode) {\r\n    var node = newNode || targetNode;\r\n\r\n    if (checkbox) {\r\n      if (node.state('checked') && !tree.checkedNodes.has(node)) {\r\n        tree.checkedNodes.add(node);\r\n      }\r\n\r\n      node.refreshIndeterminateState();\r\n    }\r\n\r\n    if (node.state('selected') && !tree.selectedNodes.has(node)) {\r\n      tree.select(node);\r\n    }\r\n\r\n    emitter();\r\n  });\r\n}\r\n\r\nvar TreeMixin = {\r\n  mounted: function mounted () {\n    var this$1 = this;\n\r\n    var tree = new Tree(this);\r\n    var dataProvider;\r\n\r\n    this.tree = tree;\r\n    this._provided.tree = tree;\r\n\r\n    if (!this.data && this.opts.fetchData) {\r\n      // Get initial data if we don't have a data directly\r\n      // In this case we call 'fetcher' with node.id == 'root' && node.name == 'root'\r\n      dataProvider = tree.fetchInitData();\r\n    } else if (this.data && this.data.then) {\r\n      // Yeah... nice check!\r\n      dataProvider = this.data;\r\n      this.loading = true;\r\n    } else {\r\n      dataProvider = Promise.resolve(this.data);\r\n    }\r\n\r\n    dataProvider.then(function (data) {\r\n      if (!data) {\r\n        data = [];\r\n      }\r\n\r\n      if (this$1.opts.store) {\r\n        this$1.connectStore(this$1.opts.store);\r\n      } else {\r\n        this$1.tree.setModel(data);\r\n      }\r\n\r\n      if (this$1.loading) {\r\n        this$1.loading = false;\r\n      }\r\n\r\n      this$1.$emit('tree:mounted', this$1);\r\n\r\n      initEvents(this$1);\r\n    });\r\n\r\n    if (this.opts.keyboardNavigation !== false) {\r\n      initKeyboardNavigation(tree);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    connectStore: function connectStore (store) {\n      var this$1 = this;\n\r\n      var Store = store.store;\n      var mutations = store.mutations;\n      var getter = store.getter;\n      var dispatcher = store.dispatcher;\r\n\r\n      assert(typeof getter === 'function', '`getter` must be a function');\r\n      assert(typeof dispatcher === 'function', '`dispatcher` must be a function');\r\n\r\n      if (undefined !== mutations) {\r\n        assert(Array.isArray(mutations), '`mutations` must be an array');\r\n      }\r\n\r\n      Store.subscribe(function (action, state) {\r\n        if (!mutations) {\r\n          this$1.tree.setModel(getter());\r\n        } else if (mutations.includes(action.type)) {\r\n          this$1.tree.setModel(getter());\r\n        }\r\n      });\r\n\r\n      this.tree.setModel(getter());\r\n\r\n      this.$on('LIQUOR_NOISE', function () {\r\n        this$1.$nextTick(function (_) {\r\n          dispatcher(this$1.toJSON());\r\n        });\r\n      });\r\n    },\r\n\r\n    recurseDown: function recurseDown (fn) {\r\n      this.tree.recurseDown(fn);\r\n    },\r\n\r\n    selected: function selected () {\r\n      return this.tree.selected()\r\n    },\r\n\r\n    checked: function checked () {\r\n      return this.tree.checked()\r\n    },\r\n\r\n    append: function append (criteria, node) {\r\n      // append to model\r\n      if (!node) {\r\n        return this.tree.addToModel(criteria, this.tree.model.length)\r\n      }\r\n\r\n      return this.tree.append(criteria, node)\r\n    },\r\n\r\n    prepend: function prepend (criteria, node) {\r\n      if (!node) {\r\n        return this.tree.addToModel(criteria, 0)\r\n      }\r\n\r\n      return this.tree.prepend(criteria, node)\r\n    },\r\n\r\n    addChild: function addChild (criteria, node) {\r\n      return this.append(criteria, node)\r\n    },\r\n\r\n    remove: function remove (criteria, multiple) {\r\n      return this.tree.remove(criteria, multiple)\r\n    },\r\n\r\n    before: function before (criteria, node) {\r\n      if (!node) {\r\n        return this.prepend(criteria)\r\n      }\r\n\r\n      return this.tree.before(criteria, node)\r\n    },\r\n\r\n    after: function after (criteria, node) {\r\n      if (!node) {\r\n        return this.append(criteria)\r\n      }\r\n\r\n      return this.tree.after(criteria, node)\r\n    },\r\n\r\n    find: function find (criteria, multiple) {\r\n      return this.tree.find(criteria, multiple)\r\n    },\r\n\r\n    findAll: function findAll (criteria) {\r\n      return this.tree.find(criteria, true)\r\n    },\r\n\r\n    expandAll: function expandAll () {\r\n      return this.tree.expandAll()\r\n    },\r\n\r\n    updateData: function updateData (criteria, callback) {\r\n      return this.tree.updateData(criteria, callback)\r\n    },\r\n\r\n    collapseAll: function collapseAll () {\r\n      return this.tree.collapseAll()\r\n    },\r\n\r\n    sortTree: function sortTree (compareFn, deep) {\r\n      return this.tree.sortTree(compareFn, deep)\r\n    },\r\n\r\n    sort: function sort () {\n      var ref;\n\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\r\n      return (ref = this.tree).sort.apply(ref, args)\r\n    },\r\n\r\n    setModel: function setModel (data) {\r\n      return this.tree.setModel(data)\r\n    },\r\n\r\n    getRootNode: function getRootNode () {\r\n      return this.tree.model.length === 1\r\n        ? this.tree.model[0]\r\n        : this.tree.model\r\n    },\r\n\r\n    toJSON: function toJSON () {\r\n      return JSON.parse(\r\n        JSON.stringify(this.model)\r\n      )\r\n    }\r\n  }\r\n\r\n/*eslint semi: 0 */\r\n/* https://github.com/vuejs/rollup-plugin-vue/issues/169 */\r\n};\n\nvar DropPosition = {\r\n  ABOVE: 'drag-above',\r\n  BELOW: 'drag-below',\r\n  ON: 'drag-on'\r\n};\r\n\r\nfunction isMovingStarted (event, start) {\r\n  return Math.abs(event.clientX - start[0]) > 5 || Math.abs(event.clientY - start[1]) > 5\r\n}\r\n\r\nfunction composedPath (event) {\r\n  var el = event.target;\r\n  var path = [];\r\n\r\n  while (el) {\r\n    path.push(el);\r\n\r\n    if (el.tagName === 'HTML') {\r\n      path.push(document);\r\n      path.push(window);\r\n\r\n      return path\r\n    }\r\n\r\n    el = el.parentElement;\r\n  }\r\n\r\n  return path\r\n}\r\n\r\nfunction getPath (event) {\r\n  if (event.path) {\r\n    return event.path\r\n  }\r\n\r\n  if (event.composedPath) {\r\n    return event.composedPath()\r\n  }\r\n\r\n  return composedPath(event)\r\n}\r\n\r\nfunction getSelectedNode (event) {\r\n  var className;\r\n  var i = 0;\r\n\r\n  var path = getPath(event);\r\n\r\n  for (; i < path.length; i++) {\r\n    className = path[i].className || '';\r\n\r\n    if (/tree-node/.test(className)) {\r\n      return path[i]\r\n    }\r\n  }\r\n\r\n  return null\r\n}\r\n\r\nfunction getDropDestination (e) {\r\n  var selectedNode = getSelectedNode(e);\r\n\r\n  if (!selectedNode) {\r\n    return null\r\n  }\r\n\r\n  return selectedNode\r\n}\r\n\r\nfunction updateHelperClasses (target, classes) {\r\n  if (!target) {\r\n    return\r\n  }\r\n\r\n  var className = target.className;\r\n\r\n  if (!classes) {\r\n    for (var i in DropPosition) {\r\n      className = className.replace(DropPosition[i], '');\r\n    }\r\n\r\n    className.replace('dragging', '');\r\n  } else if (!new RegExp(classes).test(className)) {\r\n    className += ' ' + classes;\r\n  }\r\n\r\n  target.className = className.replace(/\\s+/g, ' ');\r\n}\r\n\r\nfunction getDropPosition (e, element) {\r\n  var coords = element.getBoundingClientRect();\r\n  var nodeSection = coords.height / 3;\r\n\r\n  var dropPosition = DropPosition.ON;\r\n\r\n  if (coords.top + nodeSection >= e.clientY) {\r\n    dropPosition = DropPosition.ABOVE;\r\n  } else if (coords.top + nodeSection * 2 <= e.clientY) {\r\n    (\r\n      dropPosition = DropPosition.BELOW\r\n    );\r\n  }\r\n\r\n  return dropPosition\r\n}\r\n\r\nfunction callDndCb (args, opts, method) {\r\n  if (!opts || !opts[method] || typeof opts[method] !== 'function') {\r\n    return\r\n  }\r\n\r\n  return opts[method].apply(opts, args) !== false\r\n}\r\n\r\nfunction clearDropClasses (parent) {\r\n  for (var key in DropPosition) {\r\n    var el = parent.querySelectorAll((\".\" + (DropPosition[key])));\r\n\r\n    for (var i = 0; i < el.length; i++) {\r\n      updateHelperClasses(el[i]);\r\n    }\r\n  }\r\n}\r\n\r\nvar TreeDnd = {\r\n  methods: {\r\n    onDragStart: function onDragStart (e) {\r\n      e.preventDefault();\r\n    },\r\n\r\n    startDragging: function startDragging (node, event) {\r\n      if (!node.isDraggable() || callDndCb([node], this.tree.options.dnd, 'onDragStart') === false) {\r\n        return\r\n      }\r\n\r\n      this.$$startDragPosition = [event.clientX, event.clientY];\r\n      this.$$possibleDragNode = node;\r\n\r\n      this.initDragListeners();\r\n    },\r\n\r\n    initDragListeners: function initDragListeners () {\n      var this$1 = this;\n\r\n      var dropPosition;\r\n\r\n      var removeListeners = function () {\r\n        window.removeEventListener('mouseup', onMouseUp, true);\r\n        window.removeEventListener('mousemove', onMouseMove, true);\r\n      };\r\n\r\n      var onMouseUp = function (e) {\r\n        if (!this$1.$$startDragPosition) {\r\n          e.stopPropagation();\r\n        }\r\n\r\n        if (this$1.draggableNode) {\r\n          this$1.draggableNode.node.state('dragging', false);\r\n        }\r\n\r\n        if (this$1.$$dropDestination && this$1.tree.isNode(this$1.$$dropDestination) && this$1.$$dropDestination.vm) {\r\n          updateHelperClasses(this$1.$$dropDestination.vm.$el, null);\r\n\r\n          var cbResult = callDndCb(\r\n            [this$1.draggableNode.node, this$1.$$dropDestination, dropPosition],\r\n            this$1.tree.options.dnd,\r\n            'onDragFinish'\r\n          );\r\n\r\n          if (cbResult !== false && !(!this$1.$$dropDestination.isDropable() && dropPosition === DropPosition.ON || !dropPosition)) {\r\n            this$1.draggableNode.node.finishDragging(this$1.$$dropDestination, dropPosition);\r\n            this$1.draggableNode.node.parent = this$1.$$dropDestination;\r\n          }\r\n\r\n          this$1.$$dropDestination = null;\r\n        }\r\n\r\n        this$1.$$possibleDragNode = null;\r\n        this$1.$set(this$1, 'draggableNode', null);\r\n\r\n        removeListeners();\r\n      };\r\n\r\n      var onMouseMove = function (e) {\r\n        if (this$1.$$startDragPosition && !isMovingStarted(e, this$1.$$startDragPosition)) {\r\n          return\r\n        } else {\r\n          this$1.$$startDragPosition = null;\r\n        }\r\n\r\n        if (this$1.$$possibleDragNode) {\r\n          if (this$1.$$possibleDragNode.startDragging() === false) {\r\n            removeListeners();\r\n            this$1.$$possibleDragNode = null;\r\n\r\n            return\r\n          }\r\n\r\n          this$1.$set(this$1, 'draggableNode', { node: this$1.$$possibleDragNode, left: 0, top: 0 });\r\n          this$1.$$possibleDragNode = null;\r\n        }\r\n\r\n        this$1.draggableNode.left = e.clientX;\r\n        this$1.draggableNode.top = e.clientY;\r\n\r\n        var dropDestination = getDropDestination(e);\r\n\r\n        clearDropClasses(this$1.$el);\r\n\r\n        if (dropDestination) {\r\n          var dropDestinationId = dropDestination.getAttribute('data-id');\r\n\r\n          if (this$1.draggableNode.node.id === dropDestinationId) {\r\n            return\r\n          }\r\n\r\n          if (!this$1.$$dropDestination || this$1.$$dropDestination.id !== dropDestinationId) {\r\n            this$1.$$dropDestination = this$1.tree.getNodeById(dropDestinationId);\r\n          }\r\n\r\n          if (this$1.$$dropDestination && this$1.draggableNode.node) {\r\n            var path = this$1.$$dropDestination.getPath();\r\n\r\n            if (path.includes(this$1.draggableNode.node)) {\r\n              this$1.$$dropDestination = null;\r\n              return\r\n            }\r\n          }\r\n\r\n          dropPosition = getDropPosition(e, dropDestination);\r\n\r\n          var cbResult = callDndCb(\r\n            [this$1.draggableNode.node, this$1.$$dropDestination, dropPosition],\r\n            this$1.tree.options.dnd,\r\n            'onDragOn'\r\n          );\r\n\r\n          var isDropable = this$1.$$dropDestination.isDropable() && cbResult !== false;\r\n\r\n          if (!isDropable && dropPosition === DropPosition.ON) {\r\n            dropPosition = null;\r\n          }\r\n\r\n          updateHelperClasses(dropDestination, dropPosition);\r\n        }\r\n      };\r\n\r\n      window.addEventListener('mouseup', onMouseUp, true);\r\n      window.addEventListener('mousemove', onMouseMove, true);\r\n    }\r\n  }\r\n};\n\n//\n\nvar defaults = {\n  direction: 'ltr',\n  multiple: true,\n  checkbox: false,\n  checkOnSelect: false,\n  autoCheckChildren: true,\n  autoDisableChildren: true,\n  checkDisabledChildren: true,\n  parentSelect: false,\n  keyboardNavigation: true,\n  nodeIndent: 24,\n  minFetchDelay: 0,\n  fetchData: null,\n  propertyNames: null,\n  deletion: false,\n  dnd: false,\n  editing: false,\n  onFetchError: function(err) { throw err }\n};\n\nvar filterDefaults = {\n  emptyText: 'Nothing found!',\n  matcher: function matcher(query, node) {\n    var isMatched = new RegExp(query, 'i').test(node.text);\n\n    if (isMatched) {\n      if (node.parent && new RegExp(query, 'i').test(node.parent.text)) {\n        return false\n      }\n    }\n\n    return isMatched\n  },\n  plainList: false,\n  showChildren: true\n};\n\nvar script$1 = {\n  name: 'Tree',\n  components: {\n    TreeNode: TreeNode$1,\n    DraggableNode: DraggableNode\n  },\n\n  mixins: [TreeMixin, TreeDnd],\n\n  provide: function (_) { return ({\n    tree: null\n  }); },\n\n  props: {\n    data: {},\n\n    options: {\n      type: Object,\n      default: function (_) { return ({}); }\n    },\n\n    filter: String,\n\n    tag: {\n      type: String,\n      default: 'div'\n    }\n  },\n\n  watch: {\n    filter: function filter (term) {\n      this.tree.filter(term);\n    }\n  },\n\n  computed: {\n    visibleModel: function visibleModel() {\n      return this.model.filter(function(node) {\n        return node && node.visible()\n      }) \n    },\n\n    visibleMatches: function visibleMatches() {\n      return this.matches.filter(function(node) {\n        return node && node.visible()\n      })\n    }\n  },\n\n  data: function data () {\n    // we should not mutating a prop directly...\n    // that's why we have to create a new object\n    // TODO: add method for changing options\n    var opts = Object.assign({}, defaults, this.options);\n\n    opts.filter = Object.assign(\n      {},\n      filterDefaults,\n      opts.filter\n    );\n\n    return {\n      model: [],\n      tree: null,\n      loading: false,\n      opts: opts,\n      matches: [],\n      draggableNode: null\n    }\n  }\n};\n\n/* script */\nvar __vue_script__$3 = script$1;\n// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258\nscript$1.__file = \"TreeRoot.vue\";\n\n/* template */\nvar __vue_render__$2 = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.tag,{tag:\"component\",class:{'tree': true, 'tree-loading': this.loading, 'tree--draggable' : !!this.draggableNode},attrs:{\"role\":\"tree\"}},[(_vm.filter && _vm.matches.length == 0)?[_c('div',{staticClass:\"tree-filter-empty\",domProps:{\"innerHTML\":_vm._s(_vm.opts.filter.emptyText)}})]:[_c('ul',{staticClass:\"tree-root\",on:{\"dragstart\":_vm.onDragStart}},[(_vm.opts.filter.plainList && _vm.matches.length > 0)?_vm._l((_vm.visibleMatches),function(node){return _c('TreeNode',{key:node.id,attrs:{\"node\":node,\"options\":_vm.opts}})}):_vm._l((_vm.visibleModel),function(node){return _c('TreeNode',{key:node.id,attrs:{\"node\":node,\"options\":_vm.opts}})})],2)],_vm._v(\" \"),(_vm.draggableNode)?_c('DraggableNode',{attrs:{\"target\":_vm.draggableNode}}):_vm._e()],2)};\nvar __vue_staticRenderFns__$2 = [];\n\n  /* style */\n  var __vue_inject_styles__$3 = function (inject) {\n    if (!inject) { return }\n    inject(\"data-v-6db2091d_0\", { source: \".tree{overflow:auto}.tree-children,.tree-root{list-style:none;padding:0}.tree>.tree-filter-empty,.tree>.tree-root{padding:3px;box-sizing:border-box}.tree.tree--draggable .tree-node:not(.selected)>.tree-content:hover{background:0 0}.drag-above,.drag-below,.drag-on{position:relative;z-index:1}.drag-on>.tree-content{background:#fafcff;outline:1px solid #7baff2}.drag-above>.tree-content::before,.drag-below>.tree-content::after{display:block;content:'';position:absolute;height:8px;left:0;right:0;z-index:2;box-sizing:border-box;background-color:#3367d6;border:3px solid #3367d6;background-clip:padding-box;border-bottom-color:transparent;border-top-color:transparent;border-radius:0}.drag-above>.tree-content::before{top:0;transform:translateY(-50%)}.drag-below>.tree-content::after{bottom:0;transform:translateY(50%)}\", map: undefined, media: undefined });\n\n  };\n  /* scoped */\n  var __vue_scope_id__$3 = undefined;\n  /* module identifier */\n  var __vue_module_identifier__$3 = undefined;\n  /* functional template */\n  var __vue_is_functional_template__$3 = false;\n  /* style inject SSR */\n  \n\n  \n  var TreeRoot = normalizeComponent(\n    { render: __vue_render__$2, staticRenderFns: __vue_staticRenderFns__$2 },\n    __vue_inject_styles__$3,\n    __vue_script__$3,\n    __vue_scope_id__$3,\n    __vue_is_functional_template__$3,\n    __vue_module_identifier__$3,\n    createInjector,\n    undefined\n  );\n\nvar install = function (Vue) {\r\n  Vue.component(TreeRoot.name, TreeRoot);\r\n};\r\n\r\nTreeRoot.install = install;\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  window.Vue.use(TreeRoot);\r\n}\n\nexport default TreeRoot;\n//# sourceMappingURL=liquor-tree.esm.js.map\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","const isOldIE = typeof navigator !== 'undefined' &&\r\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\r\nfunction createInjector(context) {\r\n    return (id, style) => addStyle(id, style);\r\n}\r\nlet HEAD;\r\nconst styles = {};\r\nfunction addStyle(id, css) {\r\n    const group = isOldIE ? css.media || 'default' : id;\r\n    const style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\r\n    if (!style.ids.has(id)) {\r\n        style.ids.add(id);\r\n        let code = css.source;\r\n        if (css.map) {\r\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\r\n            // this makes source maps inside style tags work properly in Chrome\r\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\r\n            // http://stackoverflow.com/a/26603875\r\n            code +=\r\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\r\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\r\n                    ' */';\r\n        }\r\n        if (!style.element) {\r\n            style.element = document.createElement('style');\r\n            style.element.type = 'text/css';\r\n            if (css.media)\r\n                style.element.setAttribute('media', css.media);\r\n            if (HEAD === undefined) {\r\n                HEAD = document.head || document.getElementsByTagName('head')[0];\r\n            }\r\n            HEAD.appendChild(style.element);\r\n        }\r\n        if ('styleSheet' in style.element) {\r\n            style.styles.push(code);\r\n            style.element.styleSheet.cssText = style.styles\r\n                .filter(Boolean)\r\n                .join('\\n');\r\n        }\r\n        else {\r\n            const index = style.ids.size - 1;\r\n            const textNode = document.createTextNode(code);\r\n            const nodes = style.element.childNodes;\r\n            if (nodes[index])\r\n                style.element.removeChild(nodes[index]);\r\n            if (nodes.length)\r\n                style.element.insertBefore(textNode, nodes[index]);\r\n            else\r\n                style.element.appendChild(textNode);\r\n        }\r\n    }\r\n}\n\nexport default createInjector;\n//# sourceMappingURL=browser.mjs.map\n","<template>\n  <div class=\"row\">\n    <div class=\"col-5\">\n      <div class=\"border\">\n        <div class=\"m-2\">\n          <input class=\"form-control\" type=\"text\" placeholder=\"Type to filter...\" v-model=\"treeFilterUnassigned\">\n        </div>\n        <div class=\"border-bottom mb-2\"></div>\n        <div class=\"treeview-wrapper m-2\">\n          <tree\n            ref=\"unassignedTree\"\n            class=\"tree--small\"\n            :options=\"{ checkbox: true, checkOnSelect: true, fetchData: fetchUnassignedUrl }\"\n            :filter=\"treeFilterUnassigned\"\n            @node:checked=\"handleUnassignedChecked\"\n            @node:unchecked=\"handleUnassignedChecked\" />\n          </div>\n        </div>\n    </div>\n\n    <div class=\"col-2 col-2 mt-auto mb-auto text-center\">\n      <button v-bind:class=\"buttonCssClasses(unassignedChecked)\" v-on:click=\"handleAssignClick\">\n        <slot name=\"assign-button-content\"></slot>\n      </button>\n      <div class=\"mb-3\"></div>\n      <button v-bind:class=\"buttonCssClasses(assignedChecked)\" v-on:click=\"handleUnassignClick\">\n        <slot name=\"unassign-button-content\"></slot>\n      </button>\n    </div>\n\n    <div class=\"col-5\">\n      <div class=\"border\">\n        <div class=\"m-2\">\n          <input class=\"form-control\" type=\"text\" placeholder=\"Type to filter...\" v-model=\"treeFilterAssigned\">\n        </div>\n        <div class=\"border-bottom mb-2\"></div>\n        <div class=\"treeview-wrapper m-2\">\n          <tree\n            ref=\"assignedTree\"\n            class=\"tree--small\"\n            :options=\"{ checkbox: true, checkOnSelect: true, fetchData: fetchAssignedUrl }\"\n            :filter=\"treeFilterAssigned\"\n            @node:checked=\"handleAssignedChecked\"\n            @node:unchecked=\"handleAssignedChecked\" />\n          </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import LiquorTree from 'liquor-tree';\n\n  export default {\n    name: 'ui-dual-treeview',\n    props: {\n      csrfValue: 'String',\n      csrfHeaderName: 'String',\n      fetchUnassignedUrl: 'String',\n      fetchAssignedUrl: 'String',\n      postAssignUrl: 'String',\n      postUnassignUrl: 'String'\n    },\n    components: { LiquorTree },\n    data: function () {\n      return {\n        options: {\n          checkbox: true,\n          checkOnSelect: true\n        },\n        treeFilterUnassigned: '',\n        treeFilterAssigned: '',\n        unassignedChecked: 0,\n        assignedChecked: 0\n      };\n    },\n    methods: {\n      buttonCssClasses(counter) {\n        return {\n          'btn': 'btn',\n          'disabled': counter === 0,\n          'btn-secondary': counter === 0,\n          'btn-primary': counter > 0\n        }\n      },\n      handleUnassignedChecked(node) {\n        node.states.checked ? this.unassignedChecked++ : this.unassignedChecked--;\n      },\n      handleAssignedChecked(node) {\n        node.states.checked ? this.assignedChecked++ : this.assignedChecked--;\n      },\n      handleAssignClick() {\n        postData(\n          this.postAssignUrl,\n          getSelectedData(this.$refs.unassignedTree),\n          {\n            [this.csrfHeaderName]: this.csrfValue\n          }\n        )\n          .then(response => response.json())\n          .then(response => {\n            window.location.reload();\n          });\n      },\n      handleUnassignClick() {\n        postData(\n          this.postUnassignUrl,\n          getSelectedData(this.$refs.assignedTree),\n          {\n            [this.csrfHeaderName]: this.csrfValue\n          }\n        )\n          .then(response => response.json())\n          .then(response => {\n            window.location.reload();\n          });\n      }\n    }\n  };\n\n  const getSelectedData = (tree) => {\n    return tree\n      .findAll({ state: { checked: true } })\n      .filter(item => !!item.data.type)\n      .map(item => {\n        return {\n          id: item.data.id,\n          type: item.data.type\n        }\n      });\n  };\n\n  const postData = (url = '', body = {}, headers = {}) => {\n    return window.fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=utf-8',\n        ...headers\n      },\n      body: JSON.stringify(body)\n    });\n  };\n</script>\n\n<style scoped>\n  .treeview-wrapper {\n    height: 300px;\n    overflow-y: scroll;\n  }\n</style>\n","import DualTreeview from './components/DualTreeview.vue';\nimport Typeahead from './components/Typeahead.vue';\nimport './styles/index.scss';\n\nconst plugin = {\n  install,\n  DualTreeview,\n  Typeahead\n};\n\n(function (plugin) {\n  if (typeof window !== 'undefined' && window.Vue) {\n    Vue.use(plugin);\n  }\n})(plugin);\n\nexport function install(Vue, options) {\n  Vue.component(DualTreeview.name, DualTreeview);\n  Vue.component(Typeahead.name, Typeahead);\n}\n\nexport default plugin;\n"],"names":["NodeContent","name","props","render","h","this$1","this","node","vm","tree","isEditing","nodeText","text","$nextTick","_","$refs","editCtrl","focus","domProps","value","type","class","on","input","e","target","blur","stopEditing","keyup","keyCode","mouseup","stopPropagation","ref","$scopedSlots","default","innerHTML","normalizeComponent","compiledTemplate","injectStyle","defaultExport","scopeId","isFunctionalTemplate","moduleIdentifier","isShadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","options","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","existing","beforeCreate","concat","__vue_script__","__file","TreeNode","inject","components","undefined","watch","data","loading","computed","padding","depth","paddingLeft","nodeIndent","nodeClass","state","states","hasChildren","classes","has-child","expanded","selected","disabled","matched","dragging","draggable","checkbox","checked","indeterminate","visibleChildren","children","filter","child","visible","methods","onNodeFocus","activeElement","anchor","select","check","uncheck","evnt","ctrlKey","opts","$emit","editing","editable","startEditing","checkOnSelect","parentSelect","toggleExpand","multiple","unselect","selectedNodes","length","unselectAll","_editingNode","handleMouseDown","event","dnd","startDragging","isOldIE","navigator","test","userAgent","toLowerCase","id","style","css","group","media","styles","ids","Set","has","code","source","map","sources","btoa","unescape","encodeURIComponent","JSON","stringify","element","document","createElement","setAttribute","HEAD","appendChild","push","styleSheet","cssText","Boolean","join","index","size","textNode","createTextNode","nodes","childNodes","removeChild","insertBefore","addStyle","head","getElementsByTagName","__vue_script__$1","TreeNode$1","_vm","_h","$createElement","_c","_self","staticClass","attrs","data-id","mousedown","$event","direction","padding-left","padding-right","click","isBatch","_v","_e","tabindex","dblclick","_l","key","script","top","__vue_script__$2","DraggableNode","_s","recurseDown","obj","fn","res","Array","isArray","striptags","__element","innerText","finder","criteria","Object","keys","every","c","val","RegExp","isRegExp","s","find","deep","result","forEach","collect","getAllChildren","s4","Math","floor","random","toString","substring","uuidV4","nodeIterator","method","args","len","arguments","apply","Selection","items","__proto__","prototype","create","constructor","remove","expand","collapse","extendList","disable","enable","Node","item","Error","showChildren","assign","prototypeAccessors","configurable","getPath","path","el","get","set","oldText","setData","recurseUp","ignoreThis","refreshIndeterminateState","autoCheckChildren","childrenCount","selectable","checkDisabledChildren","targetNode","show","hide","hidden","enabled","autoDisableChildren","expandTop","ignoreEvent","canExpand","loadChildren","then","collapsed","canCollapse","_toggleOpenedState","toggleCollapse","isDropable","isDraggable","isRoot","model","store","__silence","finishDragging","destination","destinationPosition","clone","append","after","before","$set","newText","prevText","verbose","first","last","next","nextNode","prev","prevNode","insertAt","objectToNode","reverse","n","splice","addChild","prepend","empty","pop","removeNode","isNode","toJSON","defineProperties","nodeStates","dropable","merge","o","List","includes","indexOf","removeAll","defaultPropertyNames","TreeParser","parse","p","converter","names","convertedItem","url","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","addEventListener","response","send","request","orderAsc","node0","node1","orderDesc","sort","compareFunction","order","getCompareFunction","Tree","urlTemplate","fetchData","template","m","re","exec","replace","createTemplate","catch","onFetchError","$on","$once","$off","_sort","compareFn","sortTree","query","clearFilter","__expanded","matches","predicate","matcher","plainList","Function","bind","checkedNodes","minFetchDelay","ms","fetch","all","setTimeout","parseData","modelParse","fetchInitData","setModel","requestAnimationFrame","treeNode","getNode","selectAll","checkAll","uncheckAll","expandAll","collapseAll","nextVisibleNode","prevVisibleNode","addToModel","sourceNode","position","addNode","updateData","callback","getNodeById","propertyNames","keyCodes","codesArr","initKeyboardNavigation","$el","preventDefault","leftArrow","rightArrow","focusUp","focusdDown","checkNode","deletion","deleteNode","assert","truth","message","DropPosition","ABOVE","BELOW","ON","composedPath","tagName","window","parentElement","getDropDestination","selectedNode","className","i","getSelectedNode","updateHelperClasses","callDndCb","defaults","keyboardNavigation","err","filterDefaults","emptyText","isMatched","script$1","mixins","mounted","dataProvider","_provided","connectStore","emitter","newNode","initEvents","Store","mutations","getter","dispatcher","subscribe","action","findAll","getRootNode","onDragStart","$$startDragPosition","clientX","clientY","$$possibleDragNode","initDragListeners","dropPosition","removeListeners","removeEventListener","onMouseUp","onMouseMove","draggableNode","$$dropDestination","start","abs","left","dropDestination","querySelectorAll","clearDropClasses","dropDestinationId","getAttribute","coords","getBoundingClientRect","nodeSection","height","getDropPosition","cbResult","provide","String","tag","term","visibleModel","visibleMatches","__vue_script__$3","TreeRoot","tree-loading","tree--draggable","role","dragstart","install","Vue","component","use","shadowMode","const","let","plugin","DualTreeview","Typeahead"],"mappings":"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"}